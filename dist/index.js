module.exports=function(e,t){"use strict";var r={};function __webpack_require__(t){if(r[t]){return r[t].exports}var n=r[t]={i:t,l:false,exports:{}};e[t].call(n.exports,n,n.exports,__webpack_require__);n.l=true;return n.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(104)}return startup()}({1:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=r(129);const o=r(622);const s=r(669);const a=r(672);const c=s.promisify(i.exec);function cp(e,t,r={}){return n(this,void 0,void 0,function*(){const{force:n,recursive:i}=readCopyOptions(r);const s=(yield a.exists(t))?yield a.stat(t):null;if(s&&s.isFile()&&!n){return}const c=s&&s.isDirectory()?o.join(t,o.basename(e)):t;if(!(yield a.exists(e))){throw new Error(`no such file or directory: ${e}`)}const l=yield a.stat(e);if(l.isDirectory()){if(!i){throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`)}else{yield cpDirRecursive(e,c,0,n)}}else{if(o.relative(e,c)===""){throw new Error(`'${c}' and '${e}' are the same file`)}yield copyFile(e,c,n)}})}t.cp=cp;function mv(e,t,r={}){return n(this,void 0,void 0,function*(){if(yield a.exists(t)){let n=true;if(yield a.isDirectory(t)){t=o.join(t,o.basename(e));n=yield a.exists(t)}if(n){if(r.force==null||r.force){yield rmRF(t)}else{throw new Error("Destination already exists")}}}yield mkdirP(o.dirname(t));yield a.rename(e,t)})}t.mv=mv;function rmRF(e){return n(this,void 0,void 0,function*(){if(a.IS_WINDOWS){try{if(yield a.isDirectory(e,true)){yield c(`rd /s /q "${e}"`)}else{yield c(`del /f /a "${e}"`)}}catch(e){if(e.code!=="ENOENT")throw e}try{yield a.unlink(e)}catch(e){if(e.code!=="ENOENT")throw e}}else{let t=false;try{t=yield a.isDirectory(e)}catch(e){if(e.code!=="ENOENT")throw e;return}if(t){yield c(`rm -rf "${e}"`)}else{yield a.unlink(e)}}})}t.rmRF=rmRF;function mkdirP(e){return n(this,void 0,void 0,function*(){yield a.mkdirP(e)})}t.mkdirP=mkdirP;function which(e,t){return n(this,void 0,void 0,function*(){if(!e){throw new Error("parameter 'tool' is required")}if(t){const t=yield which(e,false);if(!t){if(a.IS_WINDOWS){throw new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`)}else{throw new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`)}}}try{const t=[];if(a.IS_WINDOWS&&process.env.PATHEXT){for(const e of process.env.PATHEXT.split(o.delimiter)){if(e){t.push(e)}}}if(a.isRooted(e)){const r=yield a.tryGetExecutablePath(e,t);if(r){return r}return""}if(e.includes("/")||a.IS_WINDOWS&&e.includes("\\")){return""}const r=[];if(process.env.PATH){for(const e of process.env.PATH.split(o.delimiter)){if(e){r.push(e)}}}for(const n of r){const r=yield a.tryGetExecutablePath(n+o.sep+e,t);if(r){return r}}return""}catch(e){throw new Error(`which failed with message ${e.message}`)}})}t.which=which;function readCopyOptions(e){const t=e.force==null?true:e.force;const r=Boolean(e.recursive);return{force:t,recursive:r}}function cpDirRecursive(e,t,r,i){return n(this,void 0,void 0,function*(){if(r>=255)return;r++;yield mkdirP(t);const n=yield a.readdir(e);for(const o of n){const n=`${e}/${o}`;const s=`${t}/${o}`;const c=yield a.lstat(n);if(c.isDirectory()){yield cpDirRecursive(n,s,r,i)}else{yield copyFile(n,s,i)}}yield a.chmod(t,(yield a.stat(e)).mode)})}function copyFile(e,t,r){return n(this,void 0,void 0,function*(){if((yield a.lstat(e)).isSymbolicLink()){try{yield a.lstat(t);yield a.unlink(t)}catch(e){if(e.code==="EPERM"){yield a.chmod(t,"0666");yield a.unlink(t)}}const r=yield a.readlink(e);yield a.symlink(r,t,a.IS_WINDOWS?"junction":null)}else if(!(yield a.exists(t))||r){yield a.copyFile(e,t)}})}},9:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=i(r(87));const s=i(r(614));const a=i(r(129));const c=i(r(622));const l=i(r(1));const u=i(r(672));const f=process.platform==="win32";class ToolRunner extends s.EventEmitter{constructor(e,t,r){super();if(!e){throw new Error("Parameter 'toolPath' cannot be null or empty.")}this.toolPath=e;this.args=t||[];this.options=r||{}}_debug(e){if(this.options.listeners&&this.options.listeners.debug){this.options.listeners.debug(e)}}_getCommandString(e,t){const r=this._getSpawnFileName();const n=this._getSpawnArgs(e);let i=t?"":"[command]";if(f){if(this._isCmdFile()){i+=r;for(const e of n){i+=` ${e}`}}else if(e.windowsVerbatimArguments){i+=`"${r}"`;for(const e of n){i+=` ${e}`}}else{i+=this._windowsQuoteCmdArg(r);for(const e of n){i+=` ${this._windowsQuoteCmdArg(e)}`}}}else{i+=r;for(const e of n){i+=` ${e}`}}return i}_processLineBuffer(e,t,r){try{let n=t+e.toString();let i=n.indexOf(o.EOL);while(i>-1){const e=n.substring(0,i);r(e);n=n.substring(i+o.EOL.length);i=n.indexOf(o.EOL)}t=n}catch(e){this._debug(`error processing line. Failed with error ${e}`)}}_getSpawnFileName(){if(f){if(this._isCmdFile()){return process.env["COMSPEC"]||"cmd.exe"}}return this.toolPath}_getSpawnArgs(e){if(f){if(this._isCmdFile()){let t=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const r of this.args){t+=" ";t+=e.windowsVerbatimArguments?r:this._windowsQuoteCmdArg(r)}t+='"';return[t]}}return this.args}_endsWith(e,t){return e.endsWith(t)}_isCmdFile(){const e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile()){return this._uvQuoteCmdArg(e)}if(!e){return'""'}const t=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let r=false;for(const n of e){if(t.some(e=>e===n)){r=true;break}}if(!r){return e}let n='"';let i=true;for(let t=e.length;t>0;t--){n+=e[t-1];if(i&&e[t-1]==="\\"){n+="\\"}else if(e[t-1]==='"'){i=true;n+='"'}else{i=false}}n+='"';return n.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e){return'""'}if(!e.includes(" ")&&!e.includes("\t")&&!e.includes('"')){return e}if(!e.includes('"')&&!e.includes("\\")){return`"${e}"`}let t='"';let r=true;for(let n=e.length;n>0;n--){t+=e[n-1];if(r&&e[n-1]==="\\"){t+="\\"}else if(e[n-1]==='"'){r=true;t+="\\"}else{r=false}}t+='"';return t.split("").reverse().join("")}_cloneExecOptions(e){e=e||{};const t={cwd:e.cwd||process.cwd(),env:e.env||process.env,silent:e.silent||false,windowsVerbatimArguments:e.windowsVerbatimArguments||false,failOnStdErr:e.failOnStdErr||false,ignoreReturnCode:e.ignoreReturnCode||false,delay:e.delay||1e4};t.outStream=e.outStream||process.stdout;t.errStream=e.errStream||process.stderr;return t}_getSpawnOptions(e,t){e=e||{};const r={};r.cwd=e.cwd;r.env=e.env;r["windowsVerbatimArguments"]=e.windowsVerbatimArguments||this._isCmdFile();if(e.windowsVerbatimArguments){r.argv0=`"${t}"`}return r}exec(){return n(this,void 0,void 0,function*(){if(!u.isRooted(this.toolPath)&&(this.toolPath.includes("/")||f&&this.toolPath.includes("\\"))){this.toolPath=c.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)}this.toolPath=yield l.which(this.toolPath,true);return new Promise((e,t)=>{this._debug(`exec tool: ${this.toolPath}`);this._debug("arguments:");for(const e of this.args){this._debug(`   ${e}`)}const r=this._cloneExecOptions(this.options);if(!r.silent&&r.outStream){r.outStream.write(this._getCommandString(r)+o.EOL)}const n=new ExecState(r,this.toolPath);n.on("debug",e=>{this._debug(e)});const i=this._getSpawnFileName();const s=a.spawn(i,this._getSpawnArgs(r),this._getSpawnOptions(this.options,i));const c="";if(s.stdout){s.stdout.on("data",e=>{if(this.options.listeners&&this.options.listeners.stdout){this.options.listeners.stdout(e)}if(!r.silent&&r.outStream){r.outStream.write(e)}this._processLineBuffer(e,c,e=>{if(this.options.listeners&&this.options.listeners.stdline){this.options.listeners.stdline(e)}})})}const l="";if(s.stderr){s.stderr.on("data",e=>{n.processStderr=true;if(this.options.listeners&&this.options.listeners.stderr){this.options.listeners.stderr(e)}if(!r.silent&&r.errStream&&r.outStream){const t=r.failOnStdErr?r.errStream:r.outStream;t.write(e)}this._processLineBuffer(e,l,e=>{if(this.options.listeners&&this.options.listeners.errline){this.options.listeners.errline(e)}})})}s.on("error",e=>{n.processError=e.message;n.processExited=true;n.processClosed=true;n.CheckComplete()});s.on("exit",e=>{n.processExitCode=e;n.processExited=true;this._debug(`Exit code ${e} received from tool '${this.toolPath}'`);n.CheckComplete()});s.on("close",e=>{n.processExitCode=e;n.processExited=true;n.processClosed=true;this._debug(`STDIO streams have closed for tool '${this.toolPath}'`);n.CheckComplete()});n.on("done",(r,n)=>{if(c.length>0){this.emit("stdline",c)}if(l.length>0){this.emit("errline",l)}s.removeAllListeners();if(r){t(r)}else{e(n)}});if(this.options.input){if(!s.stdin){throw new Error("child process missing stdin")}s.stdin.end(this.options.input)}})})}}t.ToolRunner=ToolRunner;function argStringToArray(e){const t=[];let r=false;let n=false;let i="";function append(e){if(n&&e!=='"'){i+="\\"}i+=e;n=false}for(let o=0;o<e.length;o++){const s=e.charAt(o);if(s==='"'){if(!n){r=!r}else{append(s)}continue}if(s==="\\"&&n){append(s);continue}if(s==="\\"&&r){n=true;continue}if(s===" "&&!r){if(i.length>0){t.push(i);i=""}continue}append(s)}if(i.length>0){t.push(i.trim())}return t}t.argStringToArray=argStringToArray;class ExecState extends s.EventEmitter{constructor(e,t){super();this.processClosed=false;this.processError="";this.processExitCode=0;this.processExited=false;this.processStderr=false;this.delay=1e4;this.done=false;this.timeout=null;if(!t){throw new Error("toolPath must not be empty")}this.options=e;this.toolPath=t;if(e.delay){this.delay=e.delay}}CheckComplete(){if(this.done){return}if(this.processClosed){this._setResult()}else if(this.processExited){this.timeout=setTimeout(ExecState.HandleTimeout,this.delay,this)}}_debug(e){this.emit("debug",e)}_setResult(){let e;if(this.processExited){if(this.processError){e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`)}else if(this.processExitCode!==0&&!this.options.ignoreReturnCode){e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)}else if(this.processStderr&&this.options.failOnStdErr){e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)}}if(this.timeout){clearTimeout(this.timeout);this.timeout=null}this.done=true;this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(e.done){return}if(!e.processClosed&&e.processExited){const t=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(t)}e._setResult()}}},11:function(e){e.exports=wrappy;function wrappy(e,t){if(e&&t)return wrappy(e)(t);if(typeof e!=="function")throw new TypeError("need wrapper function");Object.keys(e).forEach(function(t){wrapper[t]=e[t]});return wrapper;function wrapper(){var t=new Array(arguments.length);for(var r=0;r<t.length;r++){t[r]=arguments[r]}var n=e.apply(this,t);var i=t[t.length-1];if(typeof n==="function"&&n!==i){Object.keys(i).forEach(function(e){n[e]=i[e]})}return n}}},16:function(e){e.exports=require("tls")},23:function(e,t,r){const n=r(986);const i=r(315);let o="";async function nodeCommands(e,r,s){if(typeof s!=="undefined"){if(s.length!==0){o=s}}else{o=""}var a=await i.turnStringIntoObject(r,{listeners:{stdout:e=>{o+=e.toString()},stderr:e=>{o+=e.toString()}}});if(a.cwd){try{await n.exec("bash",["-c",`cd -P ${a.cwd} || exit 10`],{silent:true})}catch(e){throw new Error(`cannot find ${a.cwd}`)}}await n.exec("bash",["-c",e],a);t.STD=o;t.finalHostCommandOptions=a}e.exports.nodeCommands=nodeCommands;async function ankaRun(e,t,r,n){if(typeof t==="undefined"||t.length===0){t="--wait-network --wait-time"}await nodeCommands(`anka run ${t} ${e} bash -c "${r}"`,n,o)}e.exports.ankaRun=ankaRun},49:function(e,t,r){var n=r(11);e.exports=n(once);e.exports.strict=n(onceStrict);once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:true})});function once(e){var t=function(){if(t.called)return t.value;t.called=true;return t.value=e.apply(this,arguments)};t.called=false;return t}function onceStrict(e){var t=function(){if(t.called)throw new Error(t.onceError);t.called=true;return t.value=e.apply(this,arguments)};var r=e.name||"Function wrapped with `once`";t.onceError=r+" shouldn't be called more than once";t.called=false;return t}},87:function(e){e.exports=require("os")},93:function(e,t,r){e.exports=minimatch;minimatch.Minimatch=Minimatch;var n={sep:"/"};try{n=r(622)}catch(e){}var i=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var o=r(306);var s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var a="[^/]";var c=a+"*?";var l="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var u="(?:(?!(?:\\/|^)\\.).)*?";var f=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce(function(e,t){e[t]=true;return e},{})}var h=/\/+/;minimatch.filter=filter;function filter(e,t){t=t||{};return function(r,n,i){return minimatch(r,e,t)}}function ext(e,t){e=e||{};t=t||{};var r={};Object.keys(t).forEach(function(e){r[e]=t[e]});Object.keys(e).forEach(function(t){r[t]=e[t]});return r}minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return minimatch;var t=minimatch;var r=function minimatch(r,n,i){return t.minimatch(r,n,ext(e,i))};r.Minimatch=function Minimatch(r,n){return new t.Minimatch(r,ext(e,n))};return r};Minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return Minimatch;return minimatch.defaults(e).Minimatch};function minimatch(e,t,r){if(typeof t!=="string"){throw new TypeError("glob pattern string required")}if(!r)r={};if(!r.nocomment&&t.charAt(0)==="#"){return false}if(t.trim()==="")return e==="";return new Minimatch(t,r).match(e)}function Minimatch(e,t){if(!(this instanceof Minimatch)){return new Minimatch(e,t)}if(typeof e!=="string"){throw new TypeError("glob pattern string required")}if(!t)t={};e=e.trim();if(n.sep!=="/"){e=e.split(n.sep).join("/")}this.options=t;this.set=[];this.pattern=e;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var e=this.pattern;var t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=true;return}if(!e){this.empty=true;return}this.parseNegate();var r=this.globSet=this.braceExpand();if(t.debug)this.debug=console.error;this.debug(this.pattern,r);r=this.globParts=r.map(function(e){return e.split(h)});this.debug(this.pattern,r);r=r.map(function(e,t,r){return e.map(this.parse,this)},this);this.debug(this.pattern,r);r=r.filter(function(e){return e.indexOf(false)===-1});this.debug(this.pattern,r);this.set=r}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var e=this.pattern;var t=false;var r=this.options;var n=0;if(r.nonegate)return;for(var i=0,o=e.length;i<o&&e.charAt(i)==="!";i++){t=!t;n++}if(n)this.pattern=e.substr(n);this.negate=t}minimatch.braceExpand=function(e,t){return braceExpand(e,t)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(e,t){if(!t){if(this instanceof Minimatch){t=this.options}else{t={}}}e=typeof e==="undefined"?this.pattern:e;if(typeof e==="undefined"){throw new TypeError("undefined pattern")}if(t.nobrace||!e.match(/\{.*\}/)){return[e]}return o(e)}Minimatch.prototype.parse=parse;var d={};function parse(e,t){if(e.length>1024*64){throw new TypeError("pattern is too long")}var r=this.options;if(!r.noglobstar&&e==="**")return i;if(e==="")return"";var n="";var o=!!r.nocase;var l=false;var u=[];var h=[];var p;var m=false;var y=-1;var g=-1;var v=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var w=this;function clearStateChar(){if(p){switch(p){case"*":n+=c;o=true;break;case"?":n+=a;o=true;break;default:n+="\\"+p;break}w.debug("clearStateChar %j %j",p,n);p=false}}for(var b=0,_=e.length,S;b<_&&(S=e.charAt(b));b++){this.debug("%s\t%s %s %j",e,b,n,S);if(l&&f[S]){n+="\\"+S;l=false;continue}switch(S){case"/":return false;case"\\":clearStateChar();l=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",e,b,n,S);if(m){this.debug("  in class");if(S==="!"&&b===g+1)S="^";n+=S;continue}w.debug("call clearStateChar %j",p);clearStateChar();p=S;if(r.noext)clearStateChar();continue;case"(":if(m){n+="(";continue}if(!p){n+="\\(";continue}u.push({type:p,start:b-1,reStart:n.length,open:s[p].open,close:s[p].close});n+=p==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",p,n);p=false;continue;case")":if(m||!u.length){n+="\\)";continue}clearStateChar();o=true;var E=u.pop();n+=E.close;if(E.type==="!"){h.push(E)}E.reEnd=n.length;continue;case"|":if(m||!u.length||l){n+="\\|";l=false;continue}clearStateChar();n+="|";continue;case"[":clearStateChar();if(m){n+="\\"+S;continue}m=true;g=b;y=n.length;n+=S;continue;case"]":if(b===g+1||!m){n+="\\"+S;l=false;continue}if(m){var C=e.substring(g+1,b);try{RegExp("["+C+"]")}catch(e){var k=this.parse(C,d);n=n.substr(0,y)+"\\["+k[0]+"\\]";o=o||k[1];m=false;continue}}o=true;m=false;n+=S;continue;default:clearStateChar();if(l){l=false}else if(f[S]&&!(S==="^"&&m)){n+="\\"}n+=S}}if(m){C=e.substr(g+1);k=this.parse(C,d);n=n.substr(0,y)+"\\["+k[0];o=o||k[1]}for(E=u.pop();E;E=u.pop()){var A=n.slice(E.reStart+E.open.length);this.debug("setting tail",n,E);A=A.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,r){if(!r){r="\\"}return t+t+r+"|"});this.debug("tail=%j\n   %s",A,A,E,n);var O=E.type==="*"?c:E.type==="?"?a:"\\"+E.type;o=true;n=n.slice(0,E.reStart)+O+"\\("+A}clearStateChar();if(l){n+="\\\\"}var R=false;switch(n.charAt(0)){case".":case"[":case"(":R=true}for(var T=h.length-1;T>-1;T--){var x=h[T];var N=n.slice(0,x.reStart);var $=n.slice(x.reStart,x.reEnd-8);var I=n.slice(x.reEnd-8,x.reEnd);var D=n.slice(x.reEnd);I+=D;var P=N.split("(").length-1;var M=D;for(b=0;b<P;b++){M=M.replace(/\)[+*?]?/,"")}D=M;var j="";if(D===""&&t!==d){j="$"}var H=N+$+D+j+I;n=H}if(n!==""&&o){n="(?=.)"+n}if(R){n=v+n}if(t===d){return[n,o]}if(!o){return globUnescape(e)}var G=r.nocase?"i":"";try{var F=new RegExp("^"+n+"$",G)}catch(e){return new RegExp("$.")}F._glob=e;F._src=n;return F}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var e=this.set;if(!e.length){this.regexp=false;return this.regexp}var t=this.options;var r=t.noglobstar?c:t.dot?l:u;var n=t.nocase?"i":"";var o=e.map(function(e){return e.map(function(e){return e===i?r:typeof e==="string"?regExpEscape(e):e._src}).join("\\/")}).join("|");o="^(?:"+o+")$";if(this.negate)o="^(?!"+o+").*$";try{this.regexp=new RegExp(o,n)}catch(e){this.regexp=false}return this.regexp}minimatch.match=function(e,t,r){r=r||{};var n=new Minimatch(t,r);e=e.filter(function(e){return n.match(e)});if(n.options.nonull&&!e.length){e.push(t)}return e};Minimatch.prototype.match=match;function match(e,t){this.debug("match",e,this.pattern);if(this.comment)return false;if(this.empty)return e==="";if(e==="/"&&t)return true;var r=this.options;if(n.sep!=="/"){e=e.split(n.sep).join("/")}e=e.split(h);this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var o;var s;for(s=e.length-1;s>=0;s--){o=e[s];if(o)break}for(s=0;s<i.length;s++){var a=i[s];var c=e;if(r.matchBase&&a.length===1){c=[o]}var l=this.matchOne(c,a,t);if(l){if(r.flipNegate)return true;return!this.negate}}if(r.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t});this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var l=t[s];var u=e[o];this.debug(t,l,u);if(l===false)return false;if(l===i){this.debug("GLOBSTAR",[t,l,u]);var f=o;var h=s+1;if(h===c){this.debug("** at the end");for(;o<a;o++){if(e[o]==="."||e[o]===".."||!n.dot&&e[o].charAt(0)===".")return false}return true}while(f<a){var d=e[f];this.debug("\nglobstar while",e,f,t,h,d);if(this.matchOne(e.slice(f),t.slice(h),r)){this.debug("globstar found match!",f,a,d);return true}else{if(d==="."||d===".."||!n.dot&&d.charAt(0)==="."){this.debug("dot detected!",e,f,t,h);break}this.debug("globstar swallow a segment, and continue");f++}}if(r){this.debug("\n>>> no match, partial?",e,f,t,h);if(f===a)return true}return false}var p;if(typeof l==="string"){if(n.nocase){p=u.toLowerCase()===l.toLowerCase()}else{p=u===l}this.debug("string match",l,u,p)}else{p=u.match(l);this.debug("pattern match",l,u,p)}if(!p)return false}if(o===a&&s===c){return true}else if(o===a){return r}else if(s===c){var m=o===a-1&&e[o]==="";return m}throw new Error("wtf?")};function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},104:function(e,t,r){const n=r(470);const i=r(1);const o=r(315);const s=r(497);const a=r(23);async function run(){const e=n.getInput("anka-template");const t=n.getInput("anka-tag");const r=n.getInput("anka-custom-vm-label");const c=await o.getVMLabel(r);const l=n.getInput("commands");const u=n.getInput("host-pre-commands");const f=n.getInput("host-post-commands");const h=n.getInput("anka-start-options");const d=n.getInput("anka-run-options");const p=n.getInput("anka-registry-pull-options");const m=n.getInput("host-command-options");const y=n.getInput("artifact-files");const g=n.getInput("artifact-archive-file-name");const v=n.getInput("artifacts-root-directory");const w=n.getInput("skip-registry-pull");const b=n.getInput("lock-file-location");try{const r=await i.which("anka",true);console.log(`Anka Virtualization CLI found at: ${r}`);if(e.length===0){throw new Error("anka-template is required in your workflow definition!")}if(u){await a.nodeCommands(u,m,a.STD)}await s.ankaRegistryPull(e,t,p,m,b,w);await s.ankaClone(e,c,m,b);await s.ankaStart(c,h,m);console.log(`Running commands inside of Anka VM (with ${d})\n======================\n${l}\n======================`);await a.ankaRun(c,d,l,m);if(f){await a.nodeCommands(f,m,a.STD)}if(y){await s.uploadArtifacts(g,y,v,m)}n.setOutput("std",a.STD);await a.nodeCommands(`anka delete --yes ${c}`,await o.turnStringIntoObject(m,{silent:true}),a.STD)}catch(t){n.setFailed(t.stack);console.log(`Cleaning up ${c} if it exists...`);await a.nodeCommands(`anka delete --yes ${c}`,await o.turnStringIntoObject(m,{silent:true}),a.STD);await s.deleteLockFile(e,b)}}run()},117:function(e,t,r){var n=r(622);var i=process.platform==="win32";var o=r(747);var s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var e;if(s){var t=new Error;e=debugCallback}else e=missingCallback;return e;function debugCallback(e){if(e){t.message=e.message;e=t;missingCallback(e)}}function missingCallback(e){if(e){if(process.throwDeprecation)throw e;else if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);if(process.traceDeprecation)console.trace(t);else console.error(t)}}}}function maybeCallback(e){return typeof e==="function"?e:rethrow()}var a=n.normalize;if(i){var c=/(.*?)(?:[\/\\]+|$)/g}else{var c=/(.*?)(?:[\/]+|$)/g}if(i){var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/}else{var l=/^[\/]*/}t.realpathSync=function realpathSync(e,t){e=n.resolve(e);if(t&&Object.prototype.hasOwnProperty.call(t,e)){return t[e]}var r=e,s={},a={};var u;var f;var h;var d;start();function start(){var t=l.exec(e);u=t[0].length;f=t[0];h=t[0];d="";if(i&&!a[h]){o.lstatSync(h);a[h]=true}}while(u<e.length){c.lastIndex=u;var p=c.exec(e);d=f;f+=p[0];h=d+p[1];u=c.lastIndex;if(a[h]||t&&t[h]===h){continue}var m;if(t&&Object.prototype.hasOwnProperty.call(t,h)){m=t[h]}else{var y=o.lstatSync(h);if(!y.isSymbolicLink()){a[h]=true;if(t)t[h]=h;continue}var g=null;if(!i){var v=y.dev.toString(32)+":"+y.ino.toString(32);if(s.hasOwnProperty(v)){g=s[v]}}if(g===null){o.statSync(h);g=o.readlinkSync(h)}m=n.resolve(d,g);if(t)t[h]=m;if(!i)s[v]=g}e=n.resolve(m,e.slice(u));start()}if(t)t[r]=e;return e};t.realpath=function realpath(e,t,r){if(typeof r!=="function"){r=maybeCallback(t);t=null}e=n.resolve(e);if(t&&Object.prototype.hasOwnProperty.call(t,e)){return process.nextTick(r.bind(null,null,t[e]))}var s=e,a={},u={};var f;var h;var d;var p;start();function start(){var t=l.exec(e);f=t[0].length;h=t[0];d=t[0];p="";if(i&&!u[d]){o.lstat(d,function(e){if(e)return r(e);u[d]=true;LOOP()})}else{process.nextTick(LOOP)}}function LOOP(){if(f>=e.length){if(t)t[s]=e;return r(null,e)}c.lastIndex=f;var n=c.exec(e);p=h;h+=n[0];d=p+n[1];f=c.lastIndex;if(u[d]||t&&t[d]===d){return process.nextTick(LOOP)}if(t&&Object.prototype.hasOwnProperty.call(t,d)){return gotResolvedLink(t[d])}return o.lstat(d,gotStat)}function gotStat(e,n){if(e)return r(e);if(!n.isSymbolicLink()){u[d]=true;if(t)t[d]=d;return process.nextTick(LOOP)}if(!i){var s=n.dev.toString(32)+":"+n.ino.toString(32);if(a.hasOwnProperty(s)){return gotTarget(null,a[s],d)}}o.stat(d,function(e){if(e)return r(e);o.readlink(d,function(e,t){if(!i)a[s]=t;gotTarget(e,t)})})}function gotTarget(e,i,o){if(e)return r(e);var s=n.resolve(p,i);if(t)t[o]=s;gotResolvedLink(s)}function gotResolvedLink(t){e=n.resolve(t,e.slice(f));start()}}},120:function(e,t,r){e.exports=glob;var n=r(747);var i=r(302);var o=r(93);var s=o.Minimatch;var a=r(689);var c=r(614).EventEmitter;var l=r(622);var u=r(357);var f=r(681);var h=r(245);var d=r(856);var p=d.alphasort;var m=d.alphasorti;var y=d.setopts;var g=d.ownProp;var v=r(674);var w=r(669);var b=d.childrenIgnored;var _=d.isIgnored;var S=r(49);function glob(e,t,r){if(typeof t==="function")r=t,t={};if(!t)t={};if(t.sync){if(r)throw new TypeError("callback provided to sync glob");return h(e,t)}return new Glob(e,t,r)}glob.sync=h;var E=glob.GlobSync=h.GlobSync;glob.glob=glob;function extend(e,t){if(t===null||typeof t!=="object"){return e}var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e}glob.hasMagic=function(e,t){var r=extend({},t);r.noprocess=true;var n=new Glob(e,r);var i=n.minimatch.set;if(!e)return false;if(i.length>1)return true;for(var o=0;o<i[0].length;o++){if(typeof i[0][o]!=="string")return true}return false};glob.Glob=Glob;a(Glob,c);function Glob(e,t,r){if(typeof t==="function"){r=t;t=null}if(t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new E(e,t)}if(!(this instanceof Glob))return new Glob(e,t,r);y(this,e,t);this._didRealPath=false;var n=this.minimatch.set.length;this.matches=new Array(n);if(typeof r==="function"){r=S(r);this.on("error",r);this.on("end",function(e){r(null,e)})}var i=this;this._processing=0;this._emitQueue=[];this._processQueue=[];this.paused=false;if(this.noprocess)return this;if(n===0)return done();var o=true;for(var s=0;s<n;s++){this._process(this.minimatch.set[s],s,false,done)}o=false;function done(){--i._processing;if(i._processing<=0){if(o){process.nextTick(function(){i._finish()})}else{i._finish()}}}}Glob.prototype._finish=function(){u(this instanceof Glob);if(this.aborted)return;if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this);this.emit("end",this.found)};Glob.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=true;var e=this.matches.length;if(e===0)return this._finish();var t=this;for(var r=0;r<this.matches.length;r++)this._realpathSet(r,next);function next(){if(--e===0)t._finish()}};Glob.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r);var o=this;var s=n.length;if(s===0)return t();var a=this.matches[e]=Object.create(null);n.forEach(function(r,n){r=o._makeAbs(r);i.realpath(r,o.realpathCache,function(n,i){if(!n)a[i]=true;else if(n.syscall==="stat")a[r]=true;else o.emit("error",n);if(--s===0){o.matches[e]=a;t()}})})};Glob.prototype._mark=function(e){return d.mark(this,e)};Glob.prototype._makeAbs=function(e){return d.makeAbs(this,e)};Glob.prototype.abort=function(){this.aborted=true;this.emit("abort")};Glob.prototype.pause=function(){if(!this.paused){this.paused=true;this.emit("pause")}};Glob.prototype.resume=function(){if(this.paused){this.emit("resume");this.paused=false;if(this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<n.length;t++){var i=n[t];this._processing--;this._process(i[0],i[1],i[2],i[3])}}}};Glob.prototype._process=function(e,t,r,n){u(this instanceof Glob);u(typeof n==="function");if(this.aborted)return;this._processing++;if(this.paused){this._processQueue.push([e,t,r,n]);return}var i=0;while(typeof e[i]==="string"){i++}var s;switch(i){case e.length:this._processSimple(e.join("/"),t,n);return;case 0:s=null;break;default:s=e.slice(0,i).join("/");break}var a=e.slice(i);var c;if(s===null)c=".";else if(f(s)||f(e.join("/"))){if(!s||!f(s))s="/"+s;c=s}else c=s;var l=this._makeAbs(c);if(b(this,c))return n();var h=a[0]===o.GLOBSTAR;if(h)this._processGlobStar(s,c,l,a,t,r,n);else this._processReaddir(s,c,l,a,t,r,n)};Glob.prototype._processReaddir=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,l){return a._processReaddir2(e,t,r,n,i,o,l,s)})};Glob.prototype._processReaddir2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n[0];var u=!!this.minimatch.negate;var f=c._glob;var h=this.dot||f.charAt(0)===".";var d=[];for(var p=0;p<s.length;p++){var m=s[p];if(m.charAt(0)!=="."||h){var y;if(u&&!e){y=!m.match(c)}else{y=m.match(c)}if(y)d.push(m)}}var g=d.length;if(g===0)return a();if(n.length===1&&!this.mark&&!this.stat){if(!this.matches[i])this.matches[i]=Object.create(null);for(var p=0;p<g;p++){var m=d[p];if(e){if(e!=="/")m=e+"/"+m;else m=e+m}if(m.charAt(0)==="/"&&!this.nomount){m=l.join(this.root,m)}this._emitMatch(i,m)}return a()}n.shift();for(var p=0;p<g;p++){var m=d[p];var v;if(e){if(e!=="/")m=e+"/"+m;else m=e+m}this._process([m].concat(n),i,o,a)}a()};Glob.prototype._emitMatch=function(e,t){if(this.aborted)return;if(_(this,t))return;if(this.paused){this._emitQueue.push([e,t]);return}var r=f(t)?t:this._makeAbs(t);if(this.mark)t=this._mark(t);if(this.absolute)t=r;if(this.matches[e][t])return;if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=true;var i=this.statCache[r];if(i)this.emit("stat",t,i);this.emit("match",t)};Glob.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,false,t);var r="lstat\0"+e;var i=this;var o=v(r,lstatcb_);if(o)n.lstat(e,o);function lstatcb_(r,n){if(r&&r.code==="ENOENT")return t();var o=n&&n.isSymbolicLink();i.symlinks[e]=o;if(!o&&n&&!n.isDirectory()){i.cache[e]="FILE";t()}else i._readdir(e,false,t)}};Glob.prototype._readdir=function(e,t,r){if(this.aborted)return;r=v("readdir\0"+e+"\0"+t,r);if(!r)return;if(t&&!g(this.symlinks,e))return this._readdirInGlobStar(e,r);if(g(this.cache,e)){var i=this.cache[e];if(!i||i==="FILE")return r();if(Array.isArray(i))return r(null,i)}var o=this;n.readdir(e,readdirCb(this,e,r))};function readdirCb(e,t,r){return function(n,i){if(n)e._readdirError(t,n,r);else e._readdirEntries(t,i,r)}}Glob.prototype._readdirEntries=function(e,t,r){if(this.aborted)return;if(!this.mark&&!this.stat){for(var n=0;n<t.length;n++){var i=t[n];if(e==="/")i=e+i;else i=e+"/"+i;this.cache[i]=true}}this.cache[e]=t;return r(null,t)};Glob.prototype._readdirError=function(e,t,r){if(this.aborted)return;switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);this.cache[n]="FILE";if(n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd;i.code=t.code;this.emit("error",i);this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=false;break;default:this.cache[this._makeAbs(e)]=false;if(this.strict){this.emit("error",t);this.abort()}if(!this.silent)console.error("glob error",t);break}return r()};Glob.prototype._processGlobStar=function(e,t,r,n,i,o,s){var a=this;this._readdir(r,o,function(c,l){a._processGlobStar2(e,t,r,n,i,o,l,s)})};Glob.prototype._processGlobStar2=function(e,t,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1);var l=e?[e]:[];var u=l.concat(c);this._process(u,i,false,a);var f=this.symlinks[r];var h=s.length;if(f&&o)return a();for(var d=0;d<h;d++){var p=s[d];if(p.charAt(0)==="."&&!this.dot)continue;var m=l.concat(s[d],c);this._process(m,i,true,a);var y=l.concat(s[d],n);this._process(y,i,true,a)}a()};Glob.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,o){n._processSimple2(e,t,i,o,r)})};Glob.prototype._processSimple2=function(e,t,r,n,i){if(!this.matches[t])this.matches[t]=Object.create(null);if(!n)return i();if(e&&f(e)&&!this.nomount){var o=/[\/\\]$/.test(e);if(e.charAt(0)==="/"){e=l.join(this.root,e)}else{e=l.resolve(this.root,e);if(o)e+="/"}}if(process.platform==="win32")e=e.replace(/\\/g,"/");this._emitMatch(t,e);i()};Glob.prototype._stat=function(e,t){var r=this._makeAbs(e);var i=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&g(this.cache,r)){var o=this.cache[r];if(Array.isArray(o))o="DIR";if(!i||o==="DIR")return t(null,o);if(i&&o==="FILE")return t()}var s;var a=this.statCache[r];if(a!==undefined){if(a===false)return t(null,a);else{var c=a.isDirectory()?"DIR":"FILE";if(i&&c==="FILE")return t();else return t(null,c,a)}}var l=this;var u=v("stat\0"+r,lstatcb_);if(u)n.lstat(r,u);function lstatcb_(i,o){if(o&&o.isSymbolicLink()){return n.stat(r,function(n,i){if(n)l._stat2(e,r,null,o,t);else l._stat2(e,r,n,i,t)})}else{l._stat2(e,r,i,o,t)}}};Glob.prototype._stat2=function(e,t,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR")){this.statCache[t]=false;return i()}var o=e.slice(-1)==="/";this.statCache[t]=n;if(t.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,false,n);var s=true;if(n)s=n.isDirectory()?"DIR":"FILE";this.cache[t]=this.cache[t]||s;if(o&&s==="FILE")return i();return i(null,s,n)}},129:function(e){e.exports=require("child_process")},141:function(e,t,r){"use strict";var n=r(631);var i=r(16);var o=r(605);var s=r(211);var a=r(614);var c=r(357);var l=r(669);t.httpOverHttp=httpOverHttp;t.httpsOverHttp=httpsOverHttp;t.httpOverHttps=httpOverHttps;t.httpsOverHttps=httpsOverHttps;function httpOverHttp(e){var t=new TunnelingAgent(e);t.request=o.request;return t}function httpsOverHttp(e){var t=new TunnelingAgent(e);t.request=o.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function httpOverHttps(e){var t=new TunnelingAgent(e);t.request=s.request;return t}function httpsOverHttps(e){var t=new TunnelingAgent(e);t.request=s.request;t.createSocket=createSecureSocket;t.defaultPort=443;return t}function TunnelingAgent(e){var t=this;t.options=e||{};t.proxyOptions=t.options.proxy||{};t.maxSockets=t.options.maxSockets||o.Agent.defaultMaxSockets;t.requests=[];t.sockets=[];t.on("free",function onFree(e,r,n,i){var o=toOptions(r,n,i);for(var s=0,a=t.requests.length;s<a;++s){var c=t.requests[s];if(c.host===o.host&&c.port===o.port){t.requests.splice(s,1);c.request.onSocket(e);return}}e.destroy();t.removeSocket(e)})}l.inherits(TunnelingAgent,a.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(e,t,r,n){var i=this;var o=mergeOptions({request:e},i.options,toOptions(t,r,n));if(i.sockets.length>=this.maxSockets){i.requests.push(o);return}i.createSocket(o,function(t){t.on("free",onFree);t.on("close",onCloseOrRemove);t.on("agentRemove",onCloseOrRemove);e.onSocket(t);function onFree(){i.emit("free",t,o)}function onCloseOrRemove(e){i.removeSocket(t);t.removeListener("free",onFree);t.removeListener("close",onCloseOrRemove);t.removeListener("agentRemove",onCloseOrRemove)}})};TunnelingAgent.prototype.createSocket=function createSocket(e,t){var r=this;var n={};r.sockets.push(n);var i=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:false,headers:{host:e.host+":"+e.port}});if(e.localAddress){i.localAddress=e.localAddress}if(i.proxyAuth){i.headers=i.headers||{};i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")}u("making CONNECT request");var o=r.request(i);o.useChunkedEncodingByDefault=false;o.once("response",onResponse);o.once("upgrade",onUpgrade);o.once("connect",onConnect);o.once("error",onError);o.end();function onResponse(e){e.upgrade=true}function onUpgrade(e,t,r){process.nextTick(function(){onConnect(e,t,r)})}function onConnect(i,s,a){o.removeAllListeners();s.removeAllListeners();if(i.statusCode!==200){u("tunneling socket could not be established, statusCode=%d",i.statusCode);s.destroy();var c=new Error("tunneling socket could not be established, "+"statusCode="+i.statusCode);c.code="ECONNRESET";e.request.emit("error",c);r.removeSocket(n);return}if(a.length>0){u("got illegal response body from proxy");s.destroy();var c=new Error("got illegal response body from proxy");c.code="ECONNRESET";e.request.emit("error",c);r.removeSocket(n);return}u("tunneling connection has established");r.sockets[r.sockets.indexOf(n)]=s;return t(s)}function onError(t){o.removeAllListeners();u("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var i=new Error("tunneling socket could not be established, "+"cause="+t.message);i.code="ECONNRESET";e.request.emit("error",i);r.removeSocket(n)}};TunnelingAgent.prototype.removeSocket=function removeSocket(e){var t=this.sockets.indexOf(e);if(t===-1){return}this.sockets.splice(t,1);var r=this.requests.shift();if(r){this.createSocket(r,function(e){r.request.onSocket(e)})}};function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host");var s=mergeOptions({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host});var a=i.connect(0,s);r.sockets[r.sockets.indexOf(n)]=a;t(a)})}function toOptions(e,t,r){if(typeof e==="string"){return{host:e,port:t,localAddress:r}}return e}function mergeOptions(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n==="object"){var i=Object.keys(n);for(var o=0,s=i.length;o<s;++o){var a=i[o];if(n[a]!==undefined){e[a]=n[a]}}}}return e}var u;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){u=function(){var e=Array.prototype.slice.call(arguments);if(typeof e[0]==="string"){e[0]="TUNNEL: "+e[0]}else{e.unshift("TUNNEL:")}console.error.apply(console,e)}}else{u=function(){}}t.debug=u},176:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(470);class StatusReporter{constructor(e){this.totalNumberOfFilesToProcess=0;this.processedCount=0;this.largeFiles=new Map;this.totalFileStatus=undefined;this.largeFileStatus=undefined;this.displayFrequencyInMilliseconds=e}setTotalNumberOfFilesToProcess(e){this.totalNumberOfFilesToProcess=e}start(){this.totalFileStatus=setInterval(()=>{const e=this.formatPercentage(this.processedCount,this.totalNumberOfFilesToProcess);n.info(`Total file count: ${this.totalNumberOfFilesToProcess} ---- Processed file #${this.processedCount} (${e.slice(0,e.indexOf(".")+2)}%)`)},this.displayFrequencyInMilliseconds);this.largeFileStatus=setInterval(()=>{for(const e of Array.from(this.largeFiles.values())){n.info(e)}this.largeFiles.clear()},1e3)}updateLargeFileStatus(e,t,r){const n=this.formatPercentage(t,r);const i=`Uploading ${e} (${n.slice(0,n.indexOf(".")+2)}%)`;this.largeFiles.set(e,i)}stop(){if(this.totalFileStatus){clearInterval(this.totalFileStatus)}if(this.largeFileStatus){clearInterval(this.largeFileStatus)}}incrementProcessedCount(){this.processedCount++}formatPercentage(e,t){return(e/t*100).toFixed(4).toString()}}t.StatusReporter=StatusReporter},211:function(e){e.exports=require("https")},214:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(359);function create(){return n.DefaultArtifactClient.create()}t.create=create},226:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class BasicCredentialHandler{constructor(e,t){this.username=e;this.password=t}prepareRequest(e){e.headers["Authorization"]="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(e){return false}handleAuthentication(e,t,r){return null}}t.BasicCredentialHandler=BasicCredentialHandler;class BearerCredentialHandler{constructor(e){this.token=e}prepareRequest(e){e.headers["Authorization"]="Bearer "+this.token}canHandleAuthentication(e){return false}handleAuthentication(e,t,r){return null}}t.BearerCredentialHandler=BearerCredentialHandler;class PersonalAccessTokenCredentialHandler{constructor(e){this.token=e}prepareRequest(e){e.headers["Authorization"]="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(e){return false}handleAuthentication(e,t,r){return null}}t.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler},245:function(e,t,r){e.exports=globSync;globSync.GlobSync=GlobSync;var n=r(747);var i=r(302);var o=r(93);var s=o.Minimatch;var a=r(120).Glob;var c=r(669);var l=r(622);var u=r(357);var f=r(681);var h=r(856);var d=h.alphasort;var p=h.alphasorti;var m=h.setopts;var y=h.ownProp;var g=h.childrenIgnored;var v=h.isIgnored;function globSync(e,t){if(typeof t==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(e,t).found}function GlobSync(e,t){if(!e)throw new Error("must provide pattern");if(typeof t==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(e,t);m(this,e,t);if(this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++){this._process(this.minimatch.set[n],n,false)}this._finish()}GlobSync.prototype._finish=function(){u(this instanceof GlobSync);if(this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var o in t){try{o=e._makeAbs(o);var s=i.realpathSync(o,e.realpathCache);n[s]=true}catch(t){if(t.syscall==="stat")n[e._makeAbs(o)]=true;else throw t}}})}h.finish(this)};GlobSync.prototype._process=function(e,t,r){u(this instanceof GlobSync);var n=0;while(typeof e[n]==="string"){n++}var i;switch(n){case e.length:this._processSimple(e.join("/"),t);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var s=e.slice(n);var a;if(i===null)a=".";else if(f(i)||f(e.join("/"))){if(!i||!f(i))i="/"+i;a=i}else a=i;var c=this._makeAbs(a);if(g(this,a))return;var l=s[0]===o.GLOBSTAR;if(l)this._processGlobStar(i,a,c,s,t,r);else this._processReaddir(i,a,c,s,t,r)};GlobSync.prototype._processReaddir=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(!s)return;var a=n[0];var c=!!this.minimatch.negate;var u=a._glob;var f=this.dot||u.charAt(0)===".";var h=[];for(var d=0;d<s.length;d++){var p=s[d];if(p.charAt(0)!=="."||f){var m;if(c&&!e){m=!p.match(a)}else{m=p.match(a)}if(m)h.push(p)}}var y=h.length;if(y===0)return;if(n.length===1&&!this.mark&&!this.stat){if(!this.matches[i])this.matches[i]=Object.create(null);for(var d=0;d<y;d++){var p=h[d];if(e){if(e.slice(-1)!=="/")p=e+"/"+p;else p=e+p}if(p.charAt(0)==="/"&&!this.nomount){p=l.join(this.root,p)}this._emitMatch(i,p)}return}n.shift();for(var d=0;d<y;d++){var p=h[d];var g;if(e)g=[e,p];else g=[p];this._process(g.concat(n),i,o)}};GlobSync.prototype._emitMatch=function(e,t){if(v(this,t))return;var r=this._makeAbs(t);if(this.mark)t=this._mark(t);if(this.absolute){t=r}if(this.matches[e][t])return;if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=true;if(this.stat)this._stat(t)};GlobSync.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,false);var t;var r;var i;try{r=n.lstatSync(e)}catch(e){if(e.code==="ENOENT"){return null}}var o=r&&r.isSymbolicLink();this.symlinks[e]=o;if(!o&&r&&!r.isDirectory())this.cache[e]="FILE";else t=this._readdir(e,false);return t};GlobSync.prototype._readdir=function(e,t){var r;if(t&&!y(this.symlinks,e))return this._readdirInGlobStar(e);if(y(this.cache,e)){var i=this.cache[e];if(!i||i==="FILE")return null;if(Array.isArray(i))return i}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){this._readdirError(e,t);return null}};GlobSync.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat){for(var r=0;r<t.length;r++){var n=t[r];if(e==="/")n=e+n;else n=e+"/"+n;this.cache[n]=true}}this.cache[e]=t;return t};GlobSync.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);this.cache[r]="FILE";if(r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);n.path=this.cwd;n.code=t.code;throw n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=false;break;default:this.cache[this._makeAbs(e)]=false;if(this.strict)throw t;if(!this.silent)console.error("glob error",t);break}};GlobSync.prototype._processGlobStar=function(e,t,r,n,i,o){var s=this._readdir(r,o);if(!s)return;var a=n.slice(1);var c=e?[e]:[];var l=c.concat(a);this._process(l,i,false);var u=s.length;var f=this.symlinks[r];if(f&&o)return;for(var h=0;h<u;h++){var d=s[h];if(d.charAt(0)==="."&&!this.dot)continue;var p=c.concat(s[h],a);this._process(p,i,true);var m=c.concat(s[h],n);this._process(m,i,true)}};GlobSync.prototype._processSimple=function(e,t){var r=this._stat(e);if(!this.matches[t])this.matches[t]=Object.create(null);if(!r)return;if(e&&f(e)&&!this.nomount){var n=/[\/\\]$/.test(e);if(e.charAt(0)==="/"){e=l.join(this.root,e)}else{e=l.resolve(this.root,e);if(n)e+="/"}}if(process.platform==="win32")e=e.replace(/\\/g,"/");this._emitMatch(t,e)};GlobSync.prototype._stat=function(e){var t=this._makeAbs(e);var r=e.slice(-1)==="/";if(e.length>this.maxLength)return false;if(!this.stat&&y(this.cache,t)){var i=this.cache[t];if(Array.isArray(i))i="DIR";if(!r||i==="DIR")return i;if(r&&i==="FILE")return false}var o;var s=this.statCache[t];if(!s){var a;try{a=n.lstatSync(t)}catch(e){if(e&&(e.code==="ENOENT"||e.code==="ENOTDIR")){this.statCache[t]=false;return false}}if(a&&a.isSymbolicLink()){try{s=n.statSync(t)}catch(e){s=a}}else{s=a}}this.statCache[t]=s;var i=true;if(s)i=s.isDirectory()?"DIR":"FILE";this.cache[t]=this.cache[t]||i;if(r&&i==="FILE")return false;return i};GlobSync.prototype._mark=function(e){return h.mark(this,e)};GlobSync.prototype._makeAbs=function(e){return h.makeAbs(this,e)}},302:function(e,t,r){e.exports=realpath;realpath.realpath=realpath;realpath.sync=realpathSync;realpath.realpathSync=realpathSync;realpath.monkeypatch=monkeypatch;realpath.unmonkeypatch=unmonkeypatch;var n=r(747);var i=n.realpath;var o=n.realpathSync;var s=process.version;var a=/^v[0-5]\./.test(s);var c=r(117);function newError(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function realpath(e,t,r){if(a){return i(e,t,r)}if(typeof t==="function"){r=t;t=null}i(e,t,function(n,i){if(newError(n)){c.realpath(e,t,r)}else{r(n,i)}})}function realpathSync(e,t){if(a){return o(e,t)}try{return o(e,t)}catch(r){if(newError(r)){return c.realpathSync(e,t)}else{throw r}}}function monkeypatch(){n.realpath=realpath;n.realpathSync=realpathSync}function unmonkeypatch(){n.realpath=i;n.realpathSync=o}},306:function(e,t,r){var n=r(896);var i=r(621);e.exports=expandTop;var o="\0SLASH"+Math.random()+"\0";var s="\0OPEN"+Math.random()+"\0";var a="\0CLOSE"+Math.random()+"\0";var c="\0COMMA"+Math.random()+"\0";var l="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}function unescapeBraces(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[];var r=i("{","}",e);if(!r)return e.split(",");var n=r.pre;var o=r.body;var s=r.post;var a=n.split(",");a[a.length-1]+="{"+o+"}";var c=parseCommaParts(s);if(s.length){a[a.length-1]+=c.shift();a.push.apply(a,c)}t.push.apply(t,a);return t}function expandTop(e){if(!e)return[];if(e.substr(0,2)==="{}"){e="\\{\\}"+e.substr(2)}return expand(escapeBraces(e),true).map(unescapeBraces)}function identity(e){return e}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var r=[];var o=i("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var l=s||c;var u=o.body.indexOf(",")>=0;if(!l&&!u){if(o.post.match(/,.*\}/)){e=o.pre+"{"+o.body+a+o.post;return expand(e)}return[e]}var f;if(l){f=o.body.split(/\.\./)}else{f=parseCommaParts(o.body);if(f.length===1){f=expand(f[0],false).map(embrace);if(f.length===1){var h=o.post.length?expand(o.post,false):[""];return h.map(function(e){return o.pre+f[0]+e})}}}var d=o.pre;var h=o.post.length?expand(o.post,false):[""];var p;if(l){var m=numeric(f[0]);var y=numeric(f[1]);var g=Math.max(f[0].length,f[1].length);var v=f.length==3?Math.abs(numeric(f[2])):1;var w=lte;var b=y<m;if(b){v*=-1;w=gte}var _=f.some(isPadded);p=[];for(var S=m;w(S,y);S+=v){var E;if(c){E=String.fromCharCode(S);if(E==="\\")E=""}else{E=String(S);if(_){var C=g-E.length;if(C>0){var k=new Array(C+1).join("0");if(S<0)E="-"+k+E.slice(1);else E=k+E}}}p.push(E)}}else{p=n(f,function(e){return expand(e,false)})}for(var A=0;A<p.length;A++){for(var O=0;O<h.length;O++){var R=d+p[A]+h[O];if(!t||l||R)r.push(R)}}return r}},315:function(e){function sleep(e){return new Promise(t=>setTimeout(t,e))}e.exports.sleep=sleep;async function getVMLabel(e){if(typeof e==="undefined"||e.length===0){return`github-actions-\${GITHUB_REPOSITORY}-\${GITHUB_RUN_NUMBER}-\${GITHUB_JOB}-\${GITHUB_ACTION}`}else{return`${e}-${Math.floor(Math.random()*9999)+1}`}}e.exports.getVMLabel=getVMLabel;async function getArtifactArchiveName(e){if(typeof e==="undefined"||e.length===0){return`artifact`}else{return e}}e.exports.getArtifactArchiveName=getArtifactArchiveName;async function turnStringIntoObject(e,t){if(t===undefined){var t={}}if(typeof e==="object"){e=JSON.stringify(e)}if(e&&typeof e==="string"){try{var r=JSON.parse(e.replace(/(\w+:)|(\w+ :)/g,function(e){return'"'+e.substring(0,e.length-1)+'":'}));for(var n of Object.keys(r)){t[`${n}`]=r[n]}}catch(e){throw new Error(`host-command-options must be a js object (do not use single quotes to wrap values!) or JSON ({ "cwd": "./pathOnHostToRunAnkaCommands" }) inside of a string!\nSupported options: https://github.com/actions/toolkit/blob/master/packages/exec/src/interfaces.ts\n${e.stack}`)}}return t}e.exports.turnStringIntoObject=turnStringIntoObject},357:function(e){e.exports=require("assert")},359:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=i(r(470));const s=r(590);const a=r(608);const c=r(870);const l=r(855);const u=r(532);const f=r(401);const h=r(622);class DefaultArtifactClient{static create(){return new DefaultArtifactClient}uploadArtifact(e,t,r,i){return n(this,void 0,void 0,function*(){c.checkArtifactName(e);const n=s.getUploadSpecification(e,r,t);const l={artifactName:e,artifactItems:[],size:0,failedItems:[]};const u=new a.UploadHttpClient;if(n.length===0){o.warning(`No files found that can be uploaded`)}else{const t=yield u.createArtifactInFileContainer(e);if(!t.fileContainerResourceUrl){o.debug(t.toString());throw new Error("No URL provided by the Artifact Service to upload an artifact to")}o.debug(`Upload Resource URL: ${t.fileContainerResourceUrl}`);const r=yield u.uploadArtifactToFileContainer(t.fileContainerResourceUrl,n,i);yield u.patchArtifactSize(r.totalSize,e);o.info(`Finished uploading artifact ${e}. Reported size is ${r.uploadSize} bytes. There were ${r.failedItems.length} items that failed to upload`);l.artifactItems=n.map(e=>e.absoluteFilePath);l.size=r.uploadSize;l.failedItems=r.failedItems}return l})}downloadArtifact(e,t,r){return n(this,void 0,void 0,function*(){const n=new l.DownloadHttpClient;const i=yield n.listArtifacts();if(i.count===0){throw new Error(`Unable to find any artifacts for the associated workflow`)}const s=i.value.find(t=>{return t.name===e});if(!s){throw new Error(`Unable to find an artifact with the name: ${e}`)}const a=yield n.getContainerItems(s.name,s.fileContainerResourceUrl);if(!t){t=f.getWorkSpaceDirectory()}t=h.normalize(t);t=h.resolve(t);const d=u.getDownloadSpecification(e,a.value,t,(r===null||r===void 0?void 0:r.createArtifactFolder)||false);if(d.filesToDownload.length===0){o.info(`No downloadable files were found for the artifact: ${s.name}`)}else{yield c.createDirectoriesForArtifact(d.directoryStructure);o.info("Directory structure has been setup for the artifact");yield c.createEmptyFilesForArtifact(d.emptyFilesToCreate);yield n.downloadSingleArtifact(d.filesToDownload)}return{artifactName:e,downloadPath:d.rootDownloadLocation}})}downloadAllArtifacts(e){return n(this,void 0,void 0,function*(){const t=new l.DownloadHttpClient;const r=[];const n=yield t.listArtifacts();if(n.count===0){o.info("Unable to find any artifacts for the associated workflow");return r}if(!e){e=f.getWorkSpaceDirectory()}e=h.normalize(e);e=h.resolve(e);let i=0;while(i<n.count){const s=n.value[i];i+=1;const a=yield t.getContainerItems(s.name,s.fileContainerResourceUrl);const l=u.getDownloadSpecification(s.name,a.value,e,true);if(l.filesToDownload.length===0){o.info(`No downloadable files were found for any artifact ${s.name}`)}else{yield c.createDirectoriesForArtifact(l.directoryStructure);yield c.createEmptyFilesForArtifact(l.emptyFilesToCreate);yield t.downloadSingleArtifact(l.filesToDownload)}r.push({artifactName:s.name,downloadPath:l.rootDownloadLocation})}return r})}}t.DefaultArtifactClient=DefaultArtifactClient},401:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function getUploadFileConcurrency(){return 2}t.getUploadFileConcurrency=getUploadFileConcurrency;function getUploadChunkSize(){return 4*1024*1024}t.getUploadChunkSize=getUploadChunkSize;function getRetryLimit(){return 5}t.getRetryLimit=getRetryLimit;function getRetryMultiplier(){return 1.5}t.getRetryMultiplier=getRetryMultiplier;function getInitialRetryIntervalInMilliseconds(){return 3e3}t.getInitialRetryIntervalInMilliseconds=getInitialRetryIntervalInMilliseconds;function getDownloadFileConcurrency(){return 2}t.getDownloadFileConcurrency=getDownloadFileConcurrency;function getRuntimeToken(){const e=process.env["ACTIONS_RUNTIME_TOKEN"];if(!e){throw new Error("Unable to get ACTIONS_RUNTIME_TOKEN env variable")}return e}t.getRuntimeToken=getRuntimeToken;function getRuntimeUrl(){const e=process.env["ACTIONS_RUNTIME_URL"];if(!e){throw new Error("Unable to get ACTIONS_RUNTIME_URL env variable")}return e}t.getRuntimeUrl=getRuntimeUrl;function getWorkFlowRunId(){const e=process.env["GITHUB_RUN_ID"];if(!e){throw new Error("Unable to get GITHUB_RUN_ID env variable")}return e}t.getWorkFlowRunId=getWorkFlowRunId;function getWorkSpaceDirectory(){const e=process.env["GITHUB_WORKSPACE"];if(!e){throw new Error("Unable to get GITHUB_WORKSPACE env variable")}return e}t.getWorkSpaceDirectory=getWorkSpaceDirectory},402:function(e,t,r){const n=r(747);const i=r(87);const o=r(622);const s=r(417);const a=n.constants&&i.constants?{fs:n.constants,os:i.constants}:process.binding("constants");const c=r(569);const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u=/XXXXXX/,f=3,h=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),d=a.EBADF||a.os.errno.EBADF,p=a.ENOENT||a.os.errno.ENOENT,m=448,y=384,g="exit",v="SIGINT",w=[];var b=false;function _randomChars(e){var t=[],r=null;try{r=s.randomBytes(e)}catch(t){r=s.pseudoRandomBytes(e)}for(var n=0;n<e;n++){t.push(l[r[n]%l.length])}return t.join("")}function _isUndefined(e){return typeof e==="undefined"}function _parseArguments(e,t){if(typeof e==="function"){return[{},e]}if(_isUndefined(e)){return[{},t]}return[e,t]}function _generateTmpName(e){const t=_getTmpDir();if(isBlank(e.dir)&&isBlank(t)){throw new Error("No tmp dir specified")}if(!isBlank(e.name)){return o.join(e.dir||t,e.name)}if(e.template){var r=e.template;if(o.basename(r)===r)r=o.join(e.dir||t,r);return r.replace(u,_randomChars(6))}const n=[isBlank(e.prefix)?"tmp-":e.prefix,process.pid,_randomChars(12),e.postfix?e.postfix:""].join("");return o.join(e.dir||t,n)}function tmpName(e,t){var r=_parseArguments(e,t),i=r[0],o=r[1],s=!isBlank(i.name)?1:i.tries||f;if(isNaN(s)||s<0)return o(new Error("Invalid tries"));if(i.template&&!i.template.match(u))return o(new Error("Invalid template provided"));(function _getUniqueName(){try{const e=_generateTmpName(i);n.stat(e,function(t){if(!t){if(s-- >0)return _getUniqueName();return o(new Error("Could not get a unique tmp filename, max tries reached "+e))}o(null,e)})}catch(e){o(e)}})()}function tmpNameSync(e){var t=_parseArguments(e),r=t[0],i=!isBlank(r.name)?1:r.tries||f;if(isNaN(i)||i<0)throw new Error("Invalid tries");if(r.template&&!r.template.match(u))throw new Error("Invalid template provided");do{const e=_generateTmpName(r);try{n.statSync(e)}catch(t){return e}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function file(e,t){var r=_parseArguments(e,t),i=r[0],o=r[1];tmpName(i,function _tmpNameCreated(e,t){if(e)return o(e);n.open(t,h,i.mode||y,function _fileCreated(e,r){if(e)return o(e);if(i.discardDescriptor){return n.close(r,function _discardCallback(e){if(e){try{n.unlinkSync(t)}catch(t){if(!isENOENT(t)){e=t}}return o(e)}o(null,t,undefined,_prepareTmpFileRemoveCallback(t,-1,i))})}if(i.detachDescriptor){return o(null,t,r,_prepareTmpFileRemoveCallback(t,-1,i))}o(null,t,r,_prepareTmpFileRemoveCallback(t,r,i))})})}function fileSync(e){var t=_parseArguments(e),r=t[0];const i=r.discardDescriptor||r.detachDescriptor;const o=tmpNameSync(r);var s=n.openSync(o,h,r.mode||y);if(r.discardDescriptor){n.closeSync(s);s=undefined}return{name:o,fd:s,removeCallback:_prepareTmpFileRemoveCallback(o,i?-1:s,r)}}function dir(e,t){var r=_parseArguments(e,t),i=r[0],o=r[1];tmpName(i,function _tmpNameCreated(e,t){if(e)return o(e);n.mkdir(t,i.mode||m,function _dirCreated(e){if(e)return o(e);o(null,t,_prepareTmpDirRemoveCallback(t,i))})})}function dirSync(e){var t=_parseArguments(e),r=t[0];const i=tmpNameSync(r);n.mkdirSync(i,r.mode||m);return{name:i,removeCallback:_prepareTmpDirRemoveCallback(i,r)}}function _removeFileAsync(e,t){const r=function(e){if(e&&!isENOENT(e)){return t(e)}t()};if(0<=e[0])n.close(e[0],function(t){n.unlink(e[1],r)});else n.unlink(e[1],r)}function _removeFileSync(e){try{if(0<=e[0])n.closeSync(e[0])}catch(e){if(!isEBADF(e)&&!isENOENT(e))throw e}finally{try{n.unlinkSync(e[1])}catch(e){if(!isENOENT(e))throw e}}}function _prepareTmpFileRemoveCallback(e,t,r){const n=_prepareRemoveCallback(_removeFileSync,[t,e]);const i=_prepareRemoveCallback(_removeFileAsync,[t,e],n);if(!r.keep)w.unshift(n);return i}function _rimrafRemoveDirWrapper(e,t){c(e,t)}function _rimrafRemoveDirSyncWrapper(e,t){try{return t(null,c.sync(e))}catch(e){return t(e)}}function _prepareTmpDirRemoveCallback(e,t){const r=t.unsafeCleanup?_rimrafRemoveDirWrapper:n.rmdir.bind(n);const i=t.unsafeCleanup?_rimrafRemoveDirSyncWrapper:n.rmdirSync.bind(n);const o=_prepareRemoveCallback(i,e);const s=_prepareRemoveCallback(r,e,o);if(!t.keep)w.unshift(o);return s}function _prepareRemoveCallback(e,t,r){var n=false;return function _cleanupCallback(i){i=i||function(){};if(!n){const o=r||_cleanupCallback;const s=w.indexOf(o);if(s>=0)w.splice(s,1);n=true;if(e.length===1){try{e(t);return i(null)}catch(e){return i(e)}}else return e(t,i)}else return i(new Error("cleanup callback has already been called"))}}function _garbageCollector(){if(!b)return;while(w.length){try{w[0]()}catch(e){}}}function isEBADF(e){return isExpectedError(e,-d,"EBADF")}function isENOENT(e){return isExpectedError(e,-p,"ENOENT")}function isExpectedError(e,t,r){return e.code===t||e.code===r}function isBlank(e){return e===null||e===undefined||!e.trim()}function setGracefulCleanup(){b=true}function _getTmpDir(){return i.tmpdir()}function _is_legacy_listener(e){return(e.name==="_exit"||e.name==="_uncaughtExceptionThrown")&&e.toString().indexOf("_garbageCollector();")>-1}function _safely_install_sigint_listener(){const e=process.listeners(v);const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];if(n.name==="_tmp$sigint_listener"){t.push(n);process.removeListener(v,n)}}process.on(v,function _tmp$sigint_listener(e){for(let e=0,r=t.length;e<r;e++){try{t[e](false)}catch(e){}}try{_garbageCollector()}finally{if(!!e){process.exit(0)}}})}function _safely_install_exit_listener(){const e=process.listeners(g);const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];if(n.name==="_tmp$safe_listener"||_is_legacy_listener(n)){if(n.name!=="_uncaughtExceptionThrown"){t.push(n)}process.removeListener(g,n)}}process.addListener(g,function _tmp$safe_listener(e){for(let r=0,n=t.length;r<n;r++){try{t[r](e)}catch(e){}}_garbageCollector()})}_safely_install_exit_listener();_safely_install_sigint_listener();Object.defineProperty(e.exports,"tmpdir",{enumerable:true,configurable:false,get:function(){return _getTmpDir()}});e.exports.dir=dir;e.exports.dirSync=dirSync;e.exports.file=file;e.exports.fileSync=fileSync;e.exports.tmpName=tmpName;e.exports.tmpNameSync=tmpNameSync;e.exports.setGracefulCleanup=setGracefulCleanup},413:function(e,t,r){e.exports=r(141)},417:function(e){e.exports=require("crypto")},431:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=n(r(87));function issueCommand(e,t,r){const n=new Command(e,t,r);process.stdout.write(n.toString()+i.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const o="::";class Command{constructor(e,t,r){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=r}toString(){let e=o+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const n=this.properties[r];if(n){if(t){t=false}else{e+=","}e+=`${r}=${escapeProperty(n)}`}}}}e+=`${o}${escapeData(this.message)}`;return e}}function toCommandValue(e){if(e===null||e===undefined){return""}else if(typeof e==="string"||e instanceof String){return e}return JSON.stringify(e)}t.toCommandValue=toCommandValue;function escapeData(e){return toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},452:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(870);class HttpManager{constructor(e){if(e<1){throw new Error("There must be at least one client")}this.clients=new Array(e).fill(n.createHttpClient())}getClient(e){return this.clients[e]}disposeAndReplaceClient(e){this.clients[e].dispose();this.clients[e]=n.createHttpClient()}disposeAndReplaceAllClients(){for(const[e]of this.clients.entries()){this.disposeAndReplaceClient(e)}}}t.HttpManager=HttpManager},470:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=r(431);const s=i(r(87));const a=i(r(622));var c;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(c=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){const r=o.toCommandValue(t);process.env[e]=r;o.issueCommand("set-env",{name:e},r)}t.exportVariable=exportVariable;function setSecret(e){o.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){o.issueCommand("add-path",{},e);process.env["PATH"]=`${e}${a.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r){throw new Error(`Input required and not supplied: ${e}`)}return r.trim()}t.getInput=getInput;function setOutput(e,t){o.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setCommandEcho(e){o.issue("echo",e?"on":"off")}t.setCommandEcho=setCommandEcho;function setFailed(e){process.exitCode=c.Failure;error(e)}t.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}t.isDebug=isDebug;function debug(e){o.issueCommand("debug",{},e)}t.debug=debug;function error(e){o.issue("error",e instanceof Error?e.toString():e)}t.error=error;function warning(e){o.issue("warning",e instanceof Error?e.toString():e)}t.warning=warning;function info(e){process.stdout.write(e+s.EOL)}t.info=info;function startGroup(e){o.issue("group",e)}t.startGroup=startGroup;function endGroup(){o.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return n(this,void 0,void 0,function*(){startGroup(e);let r;try{r=yield t()}finally{endGroup()}return r})}t.group=group;function saveState(e,t){o.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},497:function(e,t,r){const n=r(214);const i=r(315);const o=n.create();const s=r(23);const a=r(747);let c="/tmp";async function createLockFile(e,t,r){if(t.length===0){t=c}if(t&&(typeof t!=="string"||t[0]!=="/")){throw new Error(`Must provide an absolute path (directory) where the lock file will be created, as a string`)}var n=`${t}/registry-pull-lock-${e}`;while(a.existsSync(n)){await s.nodeCommands(`echo "Lock file ${n} found... Another job on this node is pulling a tag for ${e} and pulling a second will potentially cause corruption. Sleeping for 20 seconds..."`,r,s.STD);await i.sleep(2e4)}try{a.closeSync(a.openSync(`${n}`,"w"))}catch(e){throw new Error(`Unable to create ${n}\n${e.stack}`)}}e.exports.createLockFile=createLockFile;async function deleteLockFile(e,t){if(typeof t==="undefined"||t.length===0){t=c}var r=`${t}/registry-pull-lock-${e}`;if(a.existsSync(r)){try{a.unlinkSync(`${r}`)}catch(e){throw new Error(`Unable to delete ${r}\n${e.stack}`)}}}e.exports.deleteLockFile=deleteLockFile;async function ankaRegistryPull(e,t,r,n,i,o){if(typeof o==="undefined"){o=false}if(o!=="true"){try{await createLockFile(e,i,n);var a="";if(t.length>0){a=`-t ${t}`;console.log(`Preparing Anka VM (Template: ${e}, Tag: ${t})`)}else{console.log(`Preparing Anka VM (Template: ${e}, Tag: latest)`)}await s.nodeCommands(`anka registry pull ${r} ${e} ${a}`,n,s.STD)}catch(t){deleteLockFile(e,i);throw new Error(`Registry pull failed!\n${t.stack}`)}}}e.exports.ankaRegistryPull=ankaRegistryPull;async function ankaClone(e,t,r,n){try{await s.nodeCommands(`anka clone ${e} ${t}`,r,s.STD);await deleteLockFile(e,n);await s.nodeCommands(`anka list`,r,s.STD)}catch(t){deleteLockFile(e,n);throw new Error(`Clone failed!\n${t.stack}`)}}e.exports.ankaClone=ankaClone;async function ankaStart(e,t,r){await s.nodeCommands(`anka start ${t} ${e}`,r,s.STD)}e.exports.ankaStart=ankaStart;async function uploadArtifacts(e,t,r,n){if(typeof r==="undefined"||r.length===0){r="./"}if(t){try{e=await i.getArtifactArchiveName(e);var a=await o.uploadArtifact(e,t.split("\n"),r,{continueOnError:false});await s.nodeCommands(`echo "Created and uploaded artifact ${a.artifactName} (${a.size} bytes)\nArchive contents: ${a.artifactItems}"`,await i.turnStringIntoObject(n,{silent:true}),s.STD)}catch(e){throw new Error(`Failed artifact upload!\n${e.stack}`)}}}e.exports.uploadArtifacts=uploadArtifacts},532:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=n(r(622));function getDownloadSpecification(e,t,r,n){const o=new Set;const s={rootDownloadLocation:n?i.join(r,e):r,directoryStructure:[],emptyFilesToCreate:[],filesToDownload:[]};for(const a of t){if(a.path.startsWith(`${e}/`)||a.path.startsWith(`${e}\\`)){const t=i.normalize(a.path);const c=i.join(r,n?t:t.replace(e,""));if(a.itemType==="file"){o.add(i.dirname(c));if(a.fileLength===0){s.emptyFilesToCreate.push(c)}else{s.filesToDownload.push({sourceLocation:a.contentLocation,targetPath:c})}}}}s.directoryStructure=Array.from(o);return s}t.getDownloadSpecification=getDownloadSpecification},539:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(835);const i=r(605);const o=r(211);const s=r(950);let a;var c;(function(e){e[e["OK"]=200]="OK";e[e["MultipleChoices"]=300]="MultipleChoices";e[e["MovedPermanently"]=301]="MovedPermanently";e[e["ResourceMoved"]=302]="ResourceMoved";e[e["SeeOther"]=303]="SeeOther";e[e["NotModified"]=304]="NotModified";e[e["UseProxy"]=305]="UseProxy";e[e["SwitchProxy"]=306]="SwitchProxy";e[e["TemporaryRedirect"]=307]="TemporaryRedirect";e[e["PermanentRedirect"]=308]="PermanentRedirect";e[e["BadRequest"]=400]="BadRequest";e[e["Unauthorized"]=401]="Unauthorized";e[e["PaymentRequired"]=402]="PaymentRequired";e[e["Forbidden"]=403]="Forbidden";e[e["NotFound"]=404]="NotFound";e[e["MethodNotAllowed"]=405]="MethodNotAllowed";e[e["NotAcceptable"]=406]="NotAcceptable";e[e["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";e[e["RequestTimeout"]=408]="RequestTimeout";e[e["Conflict"]=409]="Conflict";e[e["Gone"]=410]="Gone";e[e["TooManyRequests"]=429]="TooManyRequests";e[e["InternalServerError"]=500]="InternalServerError";e[e["NotImplemented"]=501]="NotImplemented";e[e["BadGateway"]=502]="BadGateway";e[e["ServiceUnavailable"]=503]="ServiceUnavailable";e[e["GatewayTimeout"]=504]="GatewayTimeout"})(c=t.HttpCodes||(t.HttpCodes={}));var l;(function(e){e["Accept"]="accept";e["ContentType"]="content-type"})(l=t.Headers||(t.Headers={}));var u;(function(e){e["ApplicationJson"]="application/json"})(u=t.MediaTypes||(t.MediaTypes={}));function getProxyUrl(e){let t=s.getProxyUrl(n.parse(e));return t?t.href:""}t.getProxyUrl=getProxyUrl;const f=[c.MovedPermanently,c.ResourceMoved,c.SeeOther,c.TemporaryRedirect,c.PermanentRedirect];const h=[c.BadGateway,c.ServiceUnavailable,c.GatewayTimeout];const d=["OPTIONS","GET","DELETE","HEAD"];const p=10;const m=5;class HttpClientResponse{constructor(e){this.message=e}readBody(){return new Promise(async(e,t)=>{let r=Buffer.alloc(0);this.message.on("data",e=>{r=Buffer.concat([r,e])});this.message.on("end",()=>{e(r.toString())})})}}t.HttpClientResponse=HttpClientResponse;function isHttps(e){let t=n.parse(e);return t.protocol==="https:"}t.isHttps=isHttps;class HttpClient{constructor(e,t,r){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=e;this.handlers=t||[];this.requestOptions=r;if(r){if(r.ignoreSslError!=null){this._ignoreSslError=r.ignoreSslError}this._socketTimeout=r.socketTimeout;if(r.allowRedirects!=null){this._allowRedirects=r.allowRedirects}if(r.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=r.allowRedirectDowngrade}if(r.maxRedirects!=null){this._maxRedirects=Math.max(r.maxRedirects,0)}if(r.keepAlive!=null){this._keepAlive=r.keepAlive}if(r.allowRetries!=null){this._allowRetries=r.allowRetries}if(r.maxRetries!=null){this._maxRetries=r.maxRetries}}}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,r){return this.request("POST",e,t,r||{})}patch(e,t,r){return this.request("PATCH",e,t,r||{})}put(e,t,r){return this.request("PUT",e,t,r||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,r,n){return this.request(e,t,r,n)}async getJson(e,t={}){t[l.Accept]=this._getExistingOrDefaultHeader(t,l.Accept,u.ApplicationJson);let r=await this.get(e,t);return this._processResponse(r,this.requestOptions)}async postJson(e,t,r={}){let n=JSON.stringify(t,null,2);r[l.Accept]=this._getExistingOrDefaultHeader(r,l.Accept,u.ApplicationJson);r[l.ContentType]=this._getExistingOrDefaultHeader(r,l.ContentType,u.ApplicationJson);let i=await this.post(e,n,r);return this._processResponse(i,this.requestOptions)}async putJson(e,t,r={}){let n=JSON.stringify(t,null,2);r[l.Accept]=this._getExistingOrDefaultHeader(r,l.Accept,u.ApplicationJson);r[l.ContentType]=this._getExistingOrDefaultHeader(r,l.ContentType,u.ApplicationJson);let i=await this.put(e,n,r);return this._processResponse(i,this.requestOptions)}async patchJson(e,t,r={}){let n=JSON.stringify(t,null,2);r[l.Accept]=this._getExistingOrDefaultHeader(r,l.Accept,u.ApplicationJson);r[l.ContentType]=this._getExistingOrDefaultHeader(r,l.ContentType,u.ApplicationJson);let i=await this.patch(e,n,r);return this._processResponse(i,this.requestOptions)}async request(e,t,r,i){if(this._disposed){throw new Error("Client has already been disposed.")}let o=n.parse(t);let s=this._prepareRequest(e,o,i);let a=this._allowRetries&&d.indexOf(e)!=-1?this._maxRetries+1:1;let l=0;let u;while(l<a){u=await this.requestRaw(s,r);if(u&&u.message&&u.message.statusCode===c.Unauthorized){let e;for(let t=0;t<this.handlers.length;t++){if(this.handlers[t].canHandleAuthentication(u)){e=this.handlers[t];break}}if(e){return e.handleAuthentication(this,s,r)}else{return u}}let t=this._maxRedirects;while(f.indexOf(u.message.statusCode)!=-1&&this._allowRedirects&&t>0){const a=u.message.headers["location"];if(!a){break}let c=n.parse(a);if(o.protocol=="https:"&&o.protocol!=c.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}await u.readBody();if(c.hostname!==o.hostname){for(let e in i){if(e.toLowerCase()==="authorization"){delete i[e]}}}s=this._prepareRequest(e,c,i);u=await this.requestRaw(s,r);t--}if(h.indexOf(u.message.statusCode)==-1){return u}l+=1;if(l<a){await u.readBody();await this._performExponentialBackoff(l)}}return u}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(e,t){return new Promise((r,n)=>{let i=function(e,t){if(e){n(e)}r(t)};this.requestRawWithCallback(e,t,i)})}requestRawWithCallback(e,t,r){let n;if(typeof t==="string"){e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8")}let i=false;let o=(e,t)=>{if(!i){i=true;r(e,t)}};let s=e.httpModule.request(e.options,e=>{let t=new HttpClientResponse(e);o(null,t)});s.on("socket",e=>{n=e});s.setTimeout(this._socketTimeout||3*6e4,()=>{if(n){n.end()}o(new Error("Request timeout: "+e.options.path),null)});s.on("error",function(e){o(e,null)});if(t&&typeof t==="string"){s.write(t,"utf8")}if(t&&typeof t!=="string"){t.on("close",function(){s.end()});t.pipe(s)}else{s.end()}}getAgent(e){let t=n.parse(e);return this._getAgent(t)}_prepareRequest(e,t,r){const n={};n.parsedUrl=t;const s=n.parsedUrl.protocol==="https:";n.httpModule=s?o:i;const a=s?443:80;n.options={};n.options.host=n.parsedUrl.hostname;n.options.port=n.parsedUrl.port?parseInt(n.parsedUrl.port):a;n.options.path=(n.parsedUrl.pathname||"")+(n.parsedUrl.search||"");n.options.method=e;n.options.headers=this._mergeHeaders(r);if(this.userAgent!=null){n.options.headers["user-agent"]=this.userAgent}n.options.agent=this._getAgent(n.parsedUrl);if(this.handlers){this.handlers.forEach(e=>{e.prepareRequest(n.options)})}return n}_mergeHeaders(e){const t=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{});if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},t(this.requestOptions.headers),t(e))}return t(e||{})}_getExistingOrDefaultHeader(e,t,r){const n=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{});let i;if(this.requestOptions&&this.requestOptions.headers){i=n(this.requestOptions.headers)[t]}return e[t]||i||r}_getAgent(e){let t;let n=s.getProxyUrl(e);let c=n&&n.hostname;if(this._keepAlive&&c){t=this._proxyAgent}if(this._keepAlive&&!c){t=this._agent}if(!!t){return t}const l=e.protocol==="https:";let u=100;if(!!this.requestOptions){u=this.requestOptions.maxSockets||i.globalAgent.maxSockets}if(c){if(!a){a=r(413)}const e={maxSockets:u,keepAlive:this._keepAlive,proxy:{proxyAuth:n.auth,host:n.hostname,port:n.port}};let i;const o=n.protocol==="https:";if(l){i=o?a.httpsOverHttps:a.httpsOverHttp}else{i=o?a.httpOverHttps:a.httpOverHttp}t=i(e);this._proxyAgent=t}if(this._keepAlive&&!t){const e={keepAlive:this._keepAlive,maxSockets:u};t=l?new o.Agent(e):new i.Agent(e);this._agent=t}if(!t){t=l?o.globalAgent:i.globalAgent}if(l&&this._ignoreSslError){t.options=Object.assign(t.options||{},{rejectUnauthorized:false})}return t}_performExponentialBackoff(e){e=Math.min(p,e);const t=m*Math.pow(2,e);return new Promise(e=>setTimeout(()=>e(),t))}static dateTimeDeserializer(e,t){if(typeof t==="string"){let e=new Date(t);if(!isNaN(e.valueOf())){return e}}return t}async _processResponse(e,t){return new Promise(async(r,n)=>{const i=e.message.statusCode;const o={statusCode:i,result:null,headers:{}};if(i==c.NotFound){r(o)}let s;let a;try{a=await e.readBody();if(a&&a.length>0){if(t&&t.deserializeDates){s=JSON.parse(a,HttpClient.dateTimeDeserializer)}else{s=JSON.parse(a)}o.result=s}o.headers=e.message.headers}catch(e){}if(i>299){let e;if(s&&s.message){e=s.message}else if(a&&a.length>0){e=a}else{e="Failed request: ("+i+")"}let t=new Error(e);t["statusCode"]=i;if(o.result){t["result"]=o.result}n(t)}else{r(o)}})}}t.HttpClient=HttpClient},566:function(e){if(typeof Object.create==="function"){e.exports=function inherits(e,t){if(t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function inherits(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}}}},569:function(e,t,r){e.exports=rimraf;rimraf.sync=rimrafSync;var n=r(357);var i=r(622);var o=r(747);var s=undefined;try{s=r(120)}catch(e){}var a=parseInt("666",8);var c={nosort:true,silent:true};var l=0;var u=process.platform==="win32";function defaults(e){var t=["unlink","chmod","stat","lstat","rmdir","readdir"];t.forEach(function(t){e[t]=e[t]||o[t];t=t+"Sync";e[t]=e[t]||o[t]});e.maxBusyTries=e.maxBusyTries||3;e.emfileWait=e.emfileWait||1e3;if(e.glob===false){e.disableGlob=true}if(e.disableGlob!==true&&s===undefined){throw Error("glob dependency not found, set `options.disableGlob = true` if intentional")}e.disableGlob=e.disableGlob||false;e.glob=e.glob||c}function rimraf(e,t,r){if(typeof t==="function"){r=t;t={}}n(e,"rimraf: missing path");n.equal(typeof e,"string","rimraf: path should be a string");n.equal(typeof r,"function","rimraf: callback function required");n(t,"rimraf: invalid options argument provided");n.equal(typeof t,"object","rimraf: options should be object");defaults(t);var i=0;var o=null;var a=0;if(t.disableGlob||!s.hasMagic(e))return afterGlob(null,[e]);t.lstat(e,function(r,n){if(!r)return afterGlob(null,[e]);s(e,t.glob,afterGlob)});function next(e){o=o||e;if(--a===0)r(o)}function afterGlob(e,n){if(e)return r(e);a=n.length;if(a===0)return r();n.forEach(function(e){rimraf_(e,t,function CB(r){if(r){if((r.code==="EBUSY"||r.code==="ENOTEMPTY"||r.code==="EPERM")&&i<t.maxBusyTries){i++;var n=i*100;return setTimeout(function(){rimraf_(e,t,CB)},n)}if(r.code==="EMFILE"&&l<t.emfileWait){return setTimeout(function(){rimraf_(e,t,CB)},l++)}if(r.code==="ENOENT")r=null}l=0;next(r)})})}}function rimraf_(e,t,r){n(e);n(t);n(typeof r==="function");t.lstat(e,function(n,i){if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&u)fixWinEPERM(e,t,n,r);if(i&&i.isDirectory())return rmdir(e,t,n,r);t.unlink(e,function(n){if(n){if(n.code==="ENOENT")return r(null);if(n.code==="EPERM")return u?fixWinEPERM(e,t,n,r):rmdir(e,t,n,r);if(n.code==="EISDIR")return rmdir(e,t,n,r)}return r(n)})})}function fixWinEPERM(e,t,r,i){n(e);n(t);n(typeof i==="function");if(r)n(r instanceof Error);t.chmod(e,a,function(n){if(n)i(n.code==="ENOENT"?null:r);else t.stat(e,function(n,o){if(n)i(n.code==="ENOENT"?null:r);else if(o.isDirectory())rmdir(e,t,r,i);else t.unlink(e,i)})})}function fixWinEPERMSync(e,t,r){n(e);n(t);if(r)n(r instanceof Error);try{t.chmodSync(e,a)}catch(e){if(e.code==="ENOENT")return;else throw r}try{var i=t.statSync(e)}catch(e){if(e.code==="ENOENT")return;else throw r}if(i.isDirectory())rmdirSync(e,t,r);else t.unlinkSync(e)}function rmdir(e,t,r,i){n(e);n(t);if(r)n(r instanceof Error);n(typeof i==="function");t.rmdir(e,function(n){if(n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM"))rmkids(e,t,i);else if(n&&n.code==="ENOTDIR")i(r);else i(n)})}function rmkids(e,t,r){n(e);n(t);n(typeof r==="function");t.readdir(e,function(n,o){if(n)return r(n);var s=o.length;if(s===0)return t.rmdir(e,r);var a;o.forEach(function(n){rimraf(i.join(e,n),t,function(n){if(a)return;if(n)return r(a=n);if(--s===0)t.rmdir(e,r)})})})}function rimrafSync(e,t){t=t||{};defaults(t);n(e,"rimraf: missing path");n.equal(typeof e,"string","rimraf: path should be a string");n(t,"rimraf: missing options");n.equal(typeof t,"object","rimraf: options should be object");var r;if(t.disableGlob||!s.hasMagic(e)){r=[e]}else{try{t.lstatSync(e);r=[e]}catch(n){r=s.sync(e,t.glob)}}if(!r.length)return;for(var i=0;i<r.length;i++){var e=r[i];try{var o=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM"&&u)fixWinEPERMSync(e,t,r)}try{if(o&&o.isDirectory())rmdirSync(e,t,null);else t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return u?fixWinEPERMSync(e,t,r):rmdirSync(e,t,r);if(r.code!=="EISDIR")throw r;rmdirSync(e,t,r)}}}function rmdirSync(e,t,r){n(e);n(t);if(r)n(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")rmkidsSync(e,t)}}function rmkidsSync(e,t){n(e);n(t);t.readdirSync(e).forEach(function(r){rimrafSync(i.join(e,r),t)});var r=u?100:1;var o=0;do{var s=true;try{var a=t.rmdirSync(e,t);s=false;return a}finally{if(++o<r&&s)continue}}while(true)}},590:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=n(r(747));const o=r(470);const s=r(622);const a=r(870);function getUploadSpecification(e,t,r){a.checkArtifactName(e);const n=[];if(!i.existsSync(t)){throw new Error(`Provided rootDirectory ${t} does not exist`)}if(!i.lstatSync(t).isDirectory()){throw new Error(`Provided rootDirectory ${t} is not a valid directory`)}t=s.normalize(t);t=s.resolve(t);for(let c of r){if(!i.existsSync(c)){throw new Error(`File ${c} does not exist`)}if(!i.lstatSync(c).isDirectory()){c=s.normalize(c);c=s.resolve(c);if(!c.startsWith(t)){throw new Error(`The rootDirectory: ${t} is not a parent directory of the file: ${c}`)}const r=c.replace(t,"");a.checkArtifactFilePath(r);n.push({absoluteFilePath:c,uploadFilePath:s.join(e,r)})}else{o.debug(`Removing ${c} from rawSearchResults because it is a directory`)}}return n}t.getUploadSpecification=getUploadSpecification},605:function(e){e.exports=require("http")},608:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=i(r(747));const s=i(r(470));const a=i(r(875));const c=i(r(794));const l=r(870);const u=r(401);const f=r(669);const h=r(835);const d=r(630);const p=r(176);const m=r(452);const y=r(647);const g=f.promisify(o.stat);class UploadHttpClient{constructor(){this.uploadHttpManager=new m.HttpManager(u.getUploadFileConcurrency());this.statusReporter=new p.StatusReporter(1e4)}createArtifactInFileContainer(e){return n(this,void 0,void 0,function*(){const t={Type:"actions_storage",Name:e};const r=JSON.stringify(t,null,2);const n=l.getArtifactUrl();const i=this.uploadHttpManager.getClient(0);const o=l.getUploadHeaders("application/json",false);const s=yield i.post(n,r,o);const a=yield s.readBody();if(l.isSuccessStatusCode(s.message.statusCode)&&a){return JSON.parse(a)}else if(l.isForbiddenStatusCode(s.message.statusCode)){throw new Error(`Artifact storage quota has been hit. Unable to upload any new artifacts`)}else{l.displayHttpDiagnostics(s);throw new Error(`Unable to create a container for the artifact ${e} at ${n}`)}})}uploadArtifactToFileContainer(e,t,r){return n(this,void 0,void 0,function*(){const i=u.getUploadFileConcurrency();const o=u.getUploadChunkSize();s.debug(`File Concurrency: ${i}, and Chunk Size: ${o}`);const a=[];let c=true;if(r){if(r.continueOnError===false){c=false}}for(const r of t){const t=new h.URL(e);t.searchParams.append("itemPath",r.uploadFilePath);a.push({file:r.absoluteFilePath,resourceUrl:t.toString(),maxChunkSize:o,continueOnError:c})}const l=[...new Array(i).keys()];const f=[];let p=0;let m=0;let y=0;let g=0;let v=false;this.statusReporter.setTotalNumberOfFilesToProcess(t.length);this.statusReporter.start();yield Promise.all(l.map(e=>n(this,void 0,void 0,function*(){while(p<t.length){const r=a[p];p+=1;if(v){f.push(r.file);continue}const n=d.performance.now();const i=yield this.uploadFileAsync(e,r);if(s.isDebug()){s.debug(`File: ${++m}/${t.length}. ${r.file} took ${(d.performance.now()-n).toFixed(3)} milliseconds to finish upload`)}y+=i.successfulUploadSize;g+=i.totalSize;if(i.isSuccess===false){f.push(r.file);if(!c){s.error(`aborting artifact upload`);v=true}}this.statusReporter.incrementProcessedCount()}})));this.statusReporter.stop();this.uploadHttpManager.disposeAndReplaceAllClients();s.info(`Total size of all the files uploaded is ${y} bytes`);return{uploadSize:y,totalSize:g,failedItems:f}})}uploadFileAsync(e,t){return n(this,void 0,void 0,function*(){const r=(yield g(t.file)).size;let n=0;let i=true;let l=0;let u=0;let f=true;if(r<65536){const n=yield y.createGZipFileInBuffer(t.file);let a;if(r<n.byteLength){a=(()=>o.createReadStream(t.file));f=false;u=r}else{a=(()=>{const e=new c.PassThrough;e.end(n);return e});u=n.byteLength}const h=yield this.uploadChunk(e,t.resourceUrl,a,0,u-1,u,f,r);if(!h){i=false;l+=u;s.warning(`Aborting upload for ${t.file} due to failure`)}return{isSuccess:i,successfulUploadSize:u-l,totalSize:r}}else{const c=yield a.file();u=yield y.createGZipFileOnDisk(t.file,c.path);let h=c.path;if(r<u){u=r;h=t.file;f=false}let d=false;while(n<u){const a=Math.min(u-n,t.maxChunkSize);if(u>104857600){this.statusReporter.updateLargeFileStatus(t.file,n,u)}const c=n;const p=n+a-1;n+=t.maxChunkSize;if(d){l+=a;continue}const m=yield this.uploadChunk(e,t.resourceUrl,()=>o.createReadStream(h,{start:c,end:p,autoClose:false}),c,p,u,f,r);if(!m){i=false;l+=a;s.warning(`Aborting upload for ${t.file} due to failure`);d=true}}yield c.cleanup();return{isSuccess:i,successfulUploadSize:u-l,totalSize:r}}})}uploadChunk(e,t,r,i,o,a,c,f){return n(this,void 0,void 0,function*(){const h=l.getUploadHeaders("application/octet-stream",true,c,f,o-i+1,l.getContentRange(i,o,a));const d=()=>n(this,void 0,void 0,function*(){const n=this.uploadHttpManager.getClient(e);return yield n.sendStream("PUT",t,r(),h)});let p=0;const m=u.getRetryLimit();const y=e=>{p++;if(p>m){if(e){l.displayHttpDiagnostics(e)}s.info(`Retry limit has been reached for chunk at offset ${i} to ${t}`);return true}return false};const g=t=>n(this,void 0,void 0,function*(){this.uploadHttpManager.disposeAndReplaceClient(e);if(t){s.info(`Backoff due to too many requests, retry #${p}. Waiting for ${t} milliseconds before continuing the upload`);yield new Promise(e=>setTimeout(e,t))}else{const e=l.getExponentialRetryTimeInMilliseconds(p);s.info(`Exponential backoff for retry #${p}. Waiting for ${e} milliseconds before continuing the upload at offset ${i}`);yield new Promise(t=>setTimeout(t,e))}s.info(`Finished backoff for retry #${p}, continuing with upload`);return});while(p<=m){let r;try{r=yield d()}catch(t){s.info(`An error has been caught http-client index ${e}, retrying the upload`);console.log(t);if(y()){return false}yield g();continue}yield r.readBody();if(l.isSuccessStatusCode(r.message.statusCode)){return true}else if(l.isRetryableStatusCode(r.message.statusCode)){s.info(`A ${r.message.statusCode} status code has been received, will attempt to retry the upload`);if(y(r)){return false}l.isThrottledStatusCode(r.message.statusCode)?yield g(l.tryGetRetryAfterValueTimeInMilliseconds(r.message.headers)):yield g()}else{s.error(`Unexpected response. Unable to upload chunk to ${t}`);l.displayHttpDiagnostics(r);return false}}return false})}patchArtifactSize(e,t){return n(this,void 0,void 0,function*(){const r=l.getUploadHeaders("application/json",false);const n=new h.URL(l.getArtifactUrl());n.searchParams.append("artifactName",t);const i={Size:e};const o=JSON.stringify(i,null,2);s.debug(`URL is ${n.toString()}`);const a=this.uploadHttpManager.getClient(0);const c=yield a.patch(n.toString(),o,r);const u=yield c.readBody();if(l.isSuccessStatusCode(c.message.statusCode)){s.debug(`Artifact ${t} has been successfully uploaded, total size in bytes: ${e}`)}else if(c.message.statusCode===404){throw new Error(`An Artifact with the name ${t} was not found`)}else{l.displayHttpDiagnostics(c);s.info(u);throw new Error(`Unable to finish uploading artifact ${t} to ${n}`)}})}}t.UploadHttpClient=UploadHttpClient},614:function(e){e.exports=require("events")},621:function(e){"use strict";e.exports=balanced;function balanced(e,t,r){if(e instanceof RegExp)e=maybeMatch(e,r);if(t instanceof RegExp)t=maybeMatch(t,r);var n=range(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function maybeMatch(e,t){var r=t.match(e);return r?r[0]:null}balanced.range=range;function range(e,t,r){var n,i,o,s,a;var c=r.indexOf(e);var l=r.indexOf(t,c+1);var u=c;if(c>=0&&l>0){n=[];o=r.length;while(u>=0&&!a){if(u==c){n.push(u);c=r.indexOf(e,u+1)}else if(n.length==1){a=[n.pop(),l]}else{i=n.pop();if(i<o){o=i;s=l}l=r.indexOf(t,u+1)}u=c<l&&c>=0?c:l}if(n.length){a=[o,s]}}return a}},622:function(e){e.exports=require("path")},630:function(e){e.exports=require("perf_hooks")},631:function(e){e.exports=require("net")},647:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(t){r[t]=e[t]&&function(r){return new Promise(function(n,i){r=e[t](r),settle(n,i,r.done,r.value)})}}function settle(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=o(r(747));const a=o(r(761));const c=r(669);const l=c.promisify(s.stat);function createGZipFileOnDisk(e,t){return n(this,void 0,void 0,function*(){return new Promise((r,i)=>{const o=s.createReadStream(e);const c=a.createGzip();const u=s.createWriteStream(t);o.pipe(c).pipe(u);u.on("finish",()=>n(this,void 0,void 0,function*(){const e=(yield l(t)).size;r(e)}));u.on("error",e=>{console.log(e);i})})})}t.createGZipFileOnDisk=createGZipFileOnDisk;function createGZipFileInBuffer(e){return n(this,void 0,void 0,function*(){return new Promise(t=>n(this,void 0,void 0,function*(){var r,n;const o=s.createReadStream(e);const c=a.createGzip();o.pipe(c);const l=[];try{for(var u=i(c),f;f=yield u.next(),!f.done;){const e=f.value;l.push(e)}}catch(e){r={error:e}}finally{try{if(f&&!f.done&&(n=u.return))yield n.call(u)}finally{if(r)throw r.error}}t(Buffer.concat(l))}))})}t.createGZipFileInBuffer=createGZipFileInBuffer},669:function(e){e.exports=require("util")},672:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i;Object.defineProperty(t,"__esModule",{value:true});const o=r(357);const s=r(747);const a=r(622);i=s.promises,t.chmod=i.chmod,t.copyFile=i.copyFile,t.lstat=i.lstat,t.mkdir=i.mkdir,t.readdir=i.readdir,t.readlink=i.readlink,t.rename=i.rename,t.rmdir=i.rmdir,t.stat=i.stat,t.symlink=i.symlink,t.unlink=i.unlink;t.IS_WINDOWS=process.platform==="win32";function exists(e){return n(this,void 0,void 0,function*(){try{yield t.stat(e)}catch(e){if(e.code==="ENOENT"){return false}throw e}return true})}t.exists=exists;function isDirectory(e,r=false){return n(this,void 0,void 0,function*(){const n=r?yield t.stat(e):yield t.lstat(e);return n.isDirectory()})}t.isDirectory=isDirectory;function isRooted(e){e=normalizeSeparators(e);if(!e){throw new Error('isRooted() parameter "p" cannot be empty')}if(t.IS_WINDOWS){return e.startsWith("\\")||/^[A-Z]:/i.test(e)}return e.startsWith("/")}t.isRooted=isRooted;function mkdirP(e,r=1e3,i=1){return n(this,void 0,void 0,function*(){o.ok(e,"a path argument must be provided");e=a.resolve(e);if(i>=r)return t.mkdir(e);try{yield t.mkdir(e);return}catch(n){switch(n.code){case"ENOENT":{yield mkdirP(a.dirname(e),r,i+1);yield t.mkdir(e);return}default:{let r;try{r=yield t.stat(e)}catch(e){throw n}if(!r.isDirectory())throw n}}}})}t.mkdirP=mkdirP;function tryGetExecutablePath(e,r){return n(this,void 0,void 0,function*(){let n=undefined;try{n=yield t.stat(e)}catch(t){if(t.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}}if(n&&n.isFile()){if(t.IS_WINDOWS){const t=a.extname(e).toUpperCase();if(r.some(e=>e.toUpperCase()===t)){return e}}else{if(isUnixExecutable(n)){return e}}}const i=e;for(const o of r){e=i+o;n=undefined;try{n=yield t.stat(e)}catch(t){if(t.code!=="ENOENT"){console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}}if(n&&n.isFile()){if(t.IS_WINDOWS){try{const r=a.dirname(e);const n=a.basename(e).toUpperCase();for(const i of yield t.readdir(r)){if(n===i.toUpperCase()){e=a.join(r,i);break}}}catch(t){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${t}`)}return e}else{if(isUnixExecutable(n)){return e}}}}return""})}t.tryGetExecutablePath=tryGetExecutablePath;function normalizeSeparators(e){e=e||"";if(t.IS_WINDOWS){e=e.replace(/\//g,"\\");return e.replace(/\\\\+/g,"\\")}return e.replace(/\/\/+/g,"/")}function isUnixExecutable(e){return(e.mode&1)>0||(e.mode&8)>0&&e.gid===process.getgid()||(e.mode&64)>0&&e.uid===process.getuid()}},674:function(e,t,r){var n=r(11);var i=Object.create(null);var o=r(49);e.exports=n(inflight);function inflight(e,t){if(i[e]){i[e].push(t);return null}else{i[e]=[t];return makeres(e)}}function makeres(e){return o(function RES(){var t=i[e];var r=t.length;var n=slice(arguments);try{for(var o=0;o<r;o++){t[o].apply(null,n)}}finally{if(t.length>r){t.splice(0,r);process.nextTick(function(){RES.apply(null,n)})}else{delete i[e]}}})}function slice(e){var t=e.length;var r=[];for(var n=0;n<t;n++)r[n]=e[n];return r}},681:function(e){"use strict";function posix(e){return e.charAt(0)==="/"}function win32(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var r=t.exec(e);var n=r[1]||"";var i=Boolean(n&&n.charAt(1)!==":");return Boolean(r[2]||i)}e.exports=process.platform==="win32"?win32:posix;e.exports.posix=posix;e.exports.win32=win32},689:function(e,t,r){try{var n=r(669);if(typeof n.inherits!=="function")throw"";e.exports=n.inherits}catch(t){e.exports=r(566)}},747:function(e){e.exports=require("fs")},761:function(e){e.exports=require("zlib")},794:function(e){e.exports=require("stream")},835:function(e){e.exports=require("url")},855:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=i(r(747));const s=i(r(470));const a=i(r(761));const c=r(870);const l=r(835);const u=r(176);const f=r(630);const h=r(452);const d=r(401);class DownloadHttpClient{constructor(){this.downloadHttpManager=new h.HttpManager(d.getDownloadFileConcurrency());this.statusReporter=new u.StatusReporter(1e3)}listArtifacts(){return n(this,void 0,void 0,function*(){const e=c.getArtifactUrl();const t=this.downloadHttpManager.getClient(0);const r=c.getDownloadHeaders("application/json");const n=yield t.get(e,r);const i=yield n.readBody();if(c.isSuccessStatusCode(n.message.statusCode)&&i){return JSON.parse(i)}c.displayHttpDiagnostics(n);throw new Error(`Unable to list artifacts for the run. Resource Url ${e}`)})}getContainerItems(e,t){return n(this,void 0,void 0,function*(){const r=new l.URL(t);r.searchParams.append("itemPath",e);const n=this.downloadHttpManager.getClient(0);const i=c.getDownloadHeaders("application/json");const o=yield n.get(r.toString(),i);const s=yield o.readBody();if(c.isSuccessStatusCode(o.message.statusCode)&&s){return JSON.parse(s)}c.displayHttpDiagnostics(o);throw new Error(`Unable to get ContainersItems from ${r}`)})}downloadSingleArtifact(e){return n(this,void 0,void 0,function*(){const t=d.getDownloadFileConcurrency();s.debug(`Download file concurrency is set to ${t}`);const r=[...new Array(t).keys()];let i=0;let o=0;s.info(`Total number of files that will be downloaded: ${e.length}`);this.statusReporter.setTotalNumberOfFilesToProcess(e.length);this.statusReporter.start();yield Promise.all(r.map(t=>n(this,void 0,void 0,function*(){while(i<e.length){const r=e[i];i+=1;const n=f.performance.now();yield this.downloadIndividualFile(t,r.sourceLocation,r.targetPath);if(s.isDebug()){s.debug(`File: ${++o}/${e.length}. ${r.targetPath} took ${(f.performance.now()-n).toFixed(3)} milliseconds to finish downloading`)}this.statusReporter.incrementProcessedCount()}}))).catch(e=>{throw new Error(`Unable to download the artifact: ${e}`)}).finally(()=>{this.statusReporter.stop();this.downloadHttpManager.disposeAndReplaceAllClients()})})}downloadIndividualFile(e,t,r){return n(this,void 0,void 0,function*(){let i=0;const a=d.getRetryLimit();const l=o.createWriteStream(r);const u=c.getDownloadHeaders("application/json",true,true);const f=()=>n(this,void 0,void 0,function*(){const r=this.downloadHttpManager.getClient(e);return yield r.get(t,u)});const h=e=>{return"content-encoding"in e&&e["content-encoding"]==="gzip"};const p=r=>n(this,void 0,void 0,function*(){i++;if(i>a){return Promise.reject(new Error(`Retry limit has been reached. Unable to download ${t}`))}else{this.downloadHttpManager.disposeAndReplaceClient(e);if(r){s.info(`Backoff due to too many requests, retry #${i}. Waiting for ${r} milliseconds before continuing the download`);yield new Promise(e=>setTimeout(e,r))}else{const e=c.getExponentialRetryTimeInMilliseconds(i);s.info(`Exponential backoff for retry #${i}. Waiting for ${e} milliseconds before continuing the download`);yield new Promise(t=>setTimeout(t,e))}s.info(`Finished backoff for retry #${i}, continuing with download`)}});while(i<=a){let e;try{e=yield f()}catch(e){s.info("An error occurred while attempting to download a file");console.log(e);yield p();continue}if(c.isSuccessStatusCode(e.message.statusCode)){return this.pipeResponseToFile(e,l,h(e.message.headers))}else if(c.isRetryableStatusCode(e.message.statusCode)){s.info(`A ${e.message.statusCode} response code has been received while attempting to download an artifact`);c.isThrottledStatusCode(e.message.statusCode)?yield p(c.tryGetRetryAfterValueTimeInMilliseconds(e.message.headers)):yield p()}else{c.displayHttpDiagnostics(e);return Promise.reject(new Error(`Unexpected http ${e.message.statusCode} during download for ${t}`))}}})}pipeResponseToFile(e,t,r){return n(this,void 0,void 0,function*(){yield new Promise((n,i)=>{if(r){const r=a.createGunzip();e.message.pipe(r).pipe(t).on("close",()=>{n()}).on("error",e=>{s.error(`An error has been encountered while decompressing and writing a downloaded file to ${t.path}`);i(e)})}else{e.message.pipe(t).on("close",()=>{n()}).on("error",e=>{s.error(`An error has been encountered while writing a downloaded file to ${t.path}`);i(e)})}});return})}}t.DownloadHttpClient=DownloadHttpClient},856:function(e,t,r){t.alphasort=alphasort;t.alphasorti=alphasorti;t.setopts=setopts;t.ownProp=ownProp;t.makeAbs=makeAbs;t.finish=finish;t.mark=mark;t.isIgnored=isIgnored;t.childrenIgnored=childrenIgnored;function ownProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var n=r(622);var i=r(93);var o=r(681);var s=i.Minimatch;function alphasorti(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function alphasort(e,t){return e.localeCompare(t)}function setupIgnores(e,t){e.ignore=t.ignore||[];if(!Array.isArray(e.ignore))e.ignore=[e.ignore];if(e.ignore.length){e.ignore=e.ignore.map(ignoreMap)}}function ignoreMap(e){var t=null;if(e.slice(-3)==="/**"){var r=e.replace(/(\/\*\*)+$/,"");t=new s(r,{dot:true})}return{matcher:new s(e,{dot:true}),gmatcher:t}}function setopts(e,t,r){if(!r)r={};if(r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar){throw new Error("base matching requires globstar")}t="**/"+t}e.silent=!!r.silent;e.pattern=t;e.strict=r.strict!==false;e.realpath=!!r.realpath;e.realpathCache=r.realpathCache||Object.create(null);e.follow=!!r.follow;e.dot=!!r.dot;e.mark=!!r.mark;e.nodir=!!r.nodir;if(e.nodir)e.mark=true;e.sync=!!r.sync;e.nounique=!!r.nounique;e.nonull=!!r.nonull;e.nosort=!!r.nosort;e.nocase=!!r.nocase;e.stat=!!r.stat;e.noprocess=!!r.noprocess;e.absolute=!!r.absolute;e.maxLength=r.maxLength||Infinity;e.cache=r.cache||Object.create(null);e.statCache=r.statCache||Object.create(null);e.symlinks=r.symlinks||Object.create(null);setupIgnores(e,r);e.changedCwd=false;var i=process.cwd();if(!ownProp(r,"cwd"))e.cwd=i;else{e.cwd=n.resolve(r.cwd);e.changedCwd=e.cwd!==i}e.root=r.root||n.resolve(e.cwd,"/");e.root=n.resolve(e.root);if(process.platform==="win32")e.root=e.root.replace(/\\/g,"/");e.cwdAbs=o(e.cwd)?e.cwd:makeAbs(e,e.cwd);if(process.platform==="win32")e.cwdAbs=e.cwdAbs.replace(/\\/g,"/");e.nomount=!!r.nomount;r.nonegate=true;r.nocomment=true;e.minimatch=new s(t,r);e.options=e.minimatch.options}function finish(e){var t=e.nounique;var r=t?[]:Object.create(null);for(var n=0,i=e.matches.length;n<i;n++){var o=e.matches[n];if(!o||Object.keys(o).length===0){if(e.nonull){var s=e.minimatch.globSet[n];if(t)r.push(s);else r[s]=true}}else{var a=Object.keys(o);if(t)r.push.apply(r,a);else a.forEach(function(e){r[e]=true})}}if(!t)r=Object.keys(r);if(!e.nosort)r=r.sort(e.nocase?alphasorti:alphasort);if(e.mark){for(var n=0;n<r.length;n++){r[n]=e._mark(r[n])}if(e.nodir){r=r.filter(function(t){var r=!/\/$/.test(t);var n=e.cache[t]||e.cache[makeAbs(e,t)];if(r&&n)r=n!=="DIR"&&!Array.isArray(n);return r})}}if(e.ignore.length)r=r.filter(function(t){return!isIgnored(e,t)});e.found=r}function mark(e,t){var r=makeAbs(e,t);var n=e.cache[r];var i=t;if(n){var o=n==="DIR"||Array.isArray(n);var s=t.slice(-1)==="/";if(o&&!s)i+="/";else if(!o&&s)i=i.slice(0,-1);if(i!==t){var a=makeAbs(e,i);e.statCache[a]=e.statCache[r];e.cache[a]=e.cache[r]}}return i}function makeAbs(e,t){var r=t;if(t.charAt(0)==="/"){r=n.join(e.root,t)}else if(o(t)||t===""){r=t}else if(e.changedCwd){r=n.resolve(e.cwd,t)}else{r=n.resolve(t)}if(process.platform==="win32")r=r.replace(/\\/g,"/");return r}function isIgnored(e,t){if(!e.ignore.length)return false;return e.ignore.some(function(e){return e.matcher.match(t)||!!(e.gmatcher&&e.gmatcher.match(t))})}function childrenIgnored(e,t){if(!e.ignore.length)return false;return e.ignore.some(function(e){return!!(e.gmatcher&&e.gmatcher.match(t))})}},870:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=r(470);const o=r(747);const s=r(539);const a=r(226);const c=r(401);function getExponentialRetryTimeInMilliseconds(e){if(e<0){throw new Error("RetryCount should not be negative")}else if(e===0){return c.getInitialRetryIntervalInMilliseconds()}const t=c.getInitialRetryIntervalInMilliseconds()*c.getRetryMultiplier()*e;const r=t*c.getRetryMultiplier();return Math.random()*(r-t)+t}t.getExponentialRetryTimeInMilliseconds=getExponentialRetryTimeInMilliseconds;function parseEnvNumber(e){const t=Number(process.env[e]);if(Number.isNaN(t)||t<0){return undefined}return t}t.parseEnvNumber=parseEnvNumber;function getApiVersion(){return"6.0-preview"}t.getApiVersion=getApiVersion;function isSuccessStatusCode(e){if(!e){return false}return e>=200&&e<300}t.isSuccessStatusCode=isSuccessStatusCode;function isForbiddenStatusCode(e){if(!e){return false}return e===s.HttpCodes.Forbidden}t.isForbiddenStatusCode=isForbiddenStatusCode;function isRetryableStatusCode(e){if(!e){return false}const t=[s.HttpCodes.BadGateway,s.HttpCodes.ServiceUnavailable,s.HttpCodes.GatewayTimeout,s.HttpCodes.TooManyRequests];return t.includes(e)}t.isRetryableStatusCode=isRetryableStatusCode;function isThrottledStatusCode(e){if(!e){return false}return e===s.HttpCodes.TooManyRequests}t.isThrottledStatusCode=isThrottledStatusCode;function tryGetRetryAfterValueTimeInMilliseconds(e){if(e["retry-after"]){const t=Number(e["retry-after"]);if(!isNaN(t)){i.info(`Retry-After header is present with a value of ${t}`);return t*1e3}i.info(`Returned retry-after header value: ${t} is non-numeric and cannot be used`);return undefined}i.info(`No retry-after header was found. Dumping all headers for diagnostic purposes`);console.log(e);return undefined}t.tryGetRetryAfterValueTimeInMilliseconds=tryGetRetryAfterValueTimeInMilliseconds;function getContentRange(e,t,r){return`bytes ${e}-${t}/${r}`}t.getContentRange=getContentRange;function getDownloadHeaders(e,t,r){const n={};if(e){n["Content-Type"]=e}if(t){n["Connection"]="Keep-Alive";n["Keep-Alive"]="10"}if(r){n["Accept-Encoding"]="gzip";n["Accept"]=`application/octet-stream;api-version=${getApiVersion()}`}else{n["Accept"]=`application/json;api-version=${getApiVersion()}`}return n}t.getDownloadHeaders=getDownloadHeaders;function getUploadHeaders(e,t,r,n,i,o){const s={};s["Accept"]=`application/json;api-version=${getApiVersion()}`;if(e){s["Content-Type"]=e}if(t){s["Connection"]="Keep-Alive";s["Keep-Alive"]="10"}if(r){s["Content-Encoding"]="gzip";s["x-tfs-filelength"]=n}if(i){s["Content-Length"]=i}if(o){s["Content-Range"]=o}return s}t.getUploadHeaders=getUploadHeaders;function createHttpClient(){return new s.HttpClient("actions/artifact",[new a.BearerCredentialHandler(c.getRuntimeToken())])}t.createHttpClient=createHttpClient;function getArtifactUrl(){const e=`${c.getRuntimeUrl()}_apis/pipelines/workflows/${c.getWorkFlowRunId()}/artifacts?api-version=${getApiVersion()}`;i.debug(`Artifact Url: ${e}`);return e}t.getArtifactUrl=getArtifactUrl;function displayHttpDiagnostics(e){i.info(`##### Begin Diagnostic HTTP information #####\nStatus Code: ${e.message.statusCode}\nStatus Message: ${e.message.statusMessage}\nHeader Information: ${JSON.stringify(e.message.headers,undefined,2)}\n###### End Diagnostic HTTP information ######`)}t.displayHttpDiagnostics=displayHttpDiagnostics;const l=['"',":","<",">","|","*","?"];const u=[...l,"\\","/"];function checkArtifactName(e){if(!e){throw new Error(`Artifact name: ${e}, is incorrectly provided`)}for(const t of u){if(e.includes(t)){throw new Error(`Artifact name is not valid: ${e}. Contains character: "${t}". Invalid artifact name characters include: ${u.toString()}.`)}}}t.checkArtifactName=checkArtifactName;function checkArtifactFilePath(e){if(!e){throw new Error(`Artifact path: ${e}, is incorrectly provided`)}for(const t of l){if(e.includes(t)){throw new Error(`Artifact path is not valid: ${e}. Contains character: "${t}". Invalid characters include: ${l.toString()}.`)}}}t.checkArtifactFilePath=checkArtifactFilePath;function createDirectoriesForArtifact(e){return n(this,void 0,void 0,function*(){for(const t of e){yield o.promises.mkdir(t,{recursive:true})}})}t.createDirectoriesForArtifact=createDirectoriesForArtifact;function createEmptyFilesForArtifact(e){return n(this,void 0,void 0,function*(){for(const t of e){yield(yield o.promises.open(t,"w")).close()}})}t.createEmptyFilesForArtifact=createEmptyFilesForArtifact},875:function(e,t,r){const{promisify:n}=r(669);const i=r(402);e.exports.fileSync=i.fileSync;const o=n((e,t)=>i.file(e,(e,r,i,o)=>e?t(e):t(undefined,{path:r,fd:i,cleanup:n(o)})));e.exports.file=(async e=>o(e));e.exports.withFile=async function withFile(t,r){const{path:n,fd:i,cleanup:o}=await e.exports.file(r);try{return await t({path:n,fd:i})}finally{await o()}};e.exports.dirSync=i.dirSync;const s=n((e,t)=>i.dir(e,(e,r,i)=>e?t(e):t(undefined,{path:r,cleanup:n(i)})));e.exports.dir=(async e=>s(e));e.exports.withDir=async function withDir(t,r){const{path:n,cleanup:i}=await e.exports.dir(r);try{return await t({path:n})}finally{await i()}};e.exports.tmpNameSync=i.tmpNameSync;e.exports.tmpName=n(i.tmpName);e.exports.tmpdir=i.tmpdir;e.exports.setGracefulCleanup=i.setGracefulCleanup},896:function(e){e.exports=function(e,r){var n=[];for(var i=0;i<e.length;i++){var o=r(e[i],i);if(t(o))n.push.apply(n,o);else n.push(o)}return n};var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},950:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=r(835);function getProxyUrl(e){let t=e.protocol==="https:";let r;if(checkBypass(e)){return r}let i;if(t){i=process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{i=process.env["http_proxy"]||process.env["HTTP_PROXY"]}if(i){r=n.parse(i)}return r}t.getProxyUrl=getProxyUrl;function checkBypass(e){if(!e.hostname){return false}let t=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!t){return false}let r;if(e.port){r=Number(e.port)}else if(e.protocol==="http:"){r=80}else if(e.protocol==="https:"){r=443}let n=[e.hostname.toUpperCase()];if(typeof r==="number"){n.push(`${n[0]}:${r}`)}for(let e of t.split(",").map(e=>e.trim().toUpperCase()).filter(e=>e)){if(n.some(t=>t===e)){return true}}return false}t.checkBypass=checkBypass},986:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(Object.hasOwnProperty.call(e,r))t[r]=e[r];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=i(r(9));function exec(e,t,r){return n(this,void 0,void 0,function*(){const n=o.argStringToArray(e);if(n.length===0){throw new Error(`Parameter 'commandLine' cannot be null or empty.`)}const i=n[0];t=n.slice(1).concat(t||[]);const s=new o.ToolRunner(i,t,r);return s.exec()})}t.exec=exec}});